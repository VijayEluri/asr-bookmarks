
    

  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <title>micha/resty - GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />

    <link href="https://assets0.github.com/stylesheets/bundle_common.css?52a04f4d5bac1e6525ba43735c8142489bd7a665" media="screen" rel="stylesheet" type="text/css" />
<link href="https://assets3.github.com/stylesheets/bundle_github.css?52a04f4d5bac1e6525ba43735c8142489bd7a665" media="screen" rel="stylesheet" type="text/css" />

    <script type="text/javascript" charset="utf-8">
      var GitHub = {}
      var github_user = null
      
    </script>
    <script src="https://assets1.github.com/javascripts/jquery/jquery-1.4.2.min.js?52a04f4d5bac1e6525ba43735c8142489bd7a665" type="text/javascript"></script>
    <script src="https://assets1.github.com/javascripts/bundle_common.js?52a04f4d5bac1e6525ba43735c8142489bd7a665" type="text/javascript"></script>
<script src="https://assets2.github.com/javascripts/bundle_github.js?52a04f4d5bac1e6525ba43735c8142489bd7a665" type="text/javascript"></script>


        <script type="text/javascript" charset="utf-8">
      GitHub.spy({
        repo: "micha/resty"
      })
    </script>

    
  
    
  

  <link href="https://github.com/micha/resty/commits/master.atom" rel="alternate" title="Recent Commits to resty:master" type="application/atom+xml" />

        <meta name="description" content="Little command line REST client that you can use in pipelines (bash or zsh)." />
    <script type="text/javascript">
      GitHub.nameWithOwner = GitHub.nameWithOwner || "micha/resty";
      GitHub.currentRef = 'master';
      GitHub.commitSHA = "42baf7257a3238423d2e94104d560f15b033ab61";
      GitHub.currentPath = "";
      GitHub.masterBranch = "master";

      
        GitHub.currentTreeSHA = "42baf7257a3238423d2e94104d560f15b033ab61";
      
    </script>
  

            <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3769691-2']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })();
    </script>

  </head>

  

  <body class="logged_out ">
    

    
      <script type="text/javascript">
        var _kmq = _kmq || [];
        function _kms(u){
          var s = document.createElement('script'); var f = document.getElementsByTagName('script')[0]; s.type = 'text/javascript'; s.async = true;
          s.src = u; f.parentNode.insertBefore(s, f);
        }
        _kms('//i.kissmetrics.com/i.js');_kms('//doug1izaerwt3.cloudfront.net/406e8bf3a2b8846ead55afb3cfaf6664523e3a54.1.js');
      </script>
    

    

    

    

    <div class="subnavd" id="main">
      <div id="header" class="true">
        
          <a class="logo boring" href="https://github.com">
            <img src="/images/modules/header/logov3.png?changed" class="default" alt="github" />
            <![if !IE]>
            <img src="/images/modules/header/logov3-hover.png" class="hover" alt="github" />
            <![endif]>
          </a>
        
        
        <div class="topsearch">
  
    <ul class="nav logged_out">
      <li class="pricing"><a href="/plans">Pricing and Signup</a></li>
      <li><a href="/explore">Explore GitHub</a></li>
      <li><a href="/features">Features</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="https://github.com/login">Login</a></li>
    </ul>
  
</div>

      </div>

      
      
        
    <div class="site">
      <div class="pagehead repohead vis-public   ">

      

      <div class="title-actions-bar">
        <h1>
          <a href="/micha">micha</a> / <strong><a href="https://github.com/micha/resty">resty</a></strong>
          
          
        </h1>

        
    <ul class="actions">
      

      
        <li class="for-owner" style="display:none"><a href="https://github.com/micha/resty/admin" class="minibutton btn-admin "><span><span class="icon"></span>Admin</span></a></li>
        <li>
          <a href="/micha/resty/toggle_watch" class="minibutton btn-watch " id="watch_button" onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', '1ac9dae8d32ef6233ac6b71b2c611b739750f84b'); f.appendChild(s);f.submit();return false;" style="display:none"><span><span class="icon"></span>Watch</span></a>
          <a href="/micha/resty/toggle_watch" class="minibutton btn-watch " id="unwatch_button" onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', '1ac9dae8d32ef6233ac6b71b2c611b739750f84b'); f.appendChild(s);f.submit();return false;" style="display:none"><span><span class="icon"></span>Unwatch</span></a>
        </li>
        
          
            <li class="for-notforked" style="display:none"><a href="/micha/resty/fork" class="minibutton btn-fork " id="fork_button" onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', '1ac9dae8d32ef6233ac6b71b2c611b739750f84b'); f.appendChild(s);f.submit();return false;"><span><span class="icon"></span>Fork</span></a></li>
            <li class="for-hasfork" style="display:none"><a href="#" class="minibutton btn-fork " id="your_fork_button"><span><span class="icon"></span>Your Fork</span></a></li>
          

          
        
      
      
      <li class="repostats">
        <ul class="repo-stats">
          <li class="watchers"><a href="/micha/resty/watchers" title="Watchers" class="tooltipped downwards">383</a></li>
          <li class="forks"><a href="/micha/resty/network" title="Forks" class="tooltipped downwards">12</a></li>
        </ul>
      </li>
    </ul>

      </div>

        
  <ul class="tabs">
    <li><a href="https://github.com/micha/resty" class="selected" highlight="repo_source">Source</a></li>
    <li><a href="https://github.com/micha/resty/commits/master" highlight="repo_commits">Commits</a></li>
    <li><a href="/micha/resty/network" highlight="repo_network">Network</a></li>
    <li><a href="/micha/resty/pulls" highlight="repo_pulls">Pull Requests (0)</a></li>

    

    
      
      <li><a href="/micha/resty/issues" highlight="issues">Issues (0)</a></li>
    

            
    <li><a href="/micha/resty/graphs" highlight="repo_graphs">Graphs</a></li>

    <li class="contextswitch nochoices">
      <span class="toggle leftwards" >
        <em>Branch:</em>
        <code>master</code>
      </span>
    </li>
  </ul>

  <div style="display:none" id="pl-description"><p><em class="placeholder">click here to add a description</em></p></div>
  <div style="display:none" id="pl-homepage"><p><em class="placeholder">click here to add a homepage</em></p></div>

  <div class="subnav-bar">
  
  <ul>
    <li>
      <a href="#" class="dropdown">Switch Branches (1)</a>
      <ul>
        
          
            <li><strong>master &#x2713;</strong></li>
            
      </ul>
    </li>
    <li>
      <a href="#" class="dropdown defunct">Switch Tags (0)</a>
      
    </li>
    <li>
    
    <a href="/micha/resty/branches" class="manage">Branch List</a>
    
    </li>
  </ul>
</div>

  
  
  
  
  
  



        
    <div id="repo_details" class="metabox clearfix">
      <div id="repo_details_loader" class="metabox-loader" style="display:none">Sending Request&hellip;</div>

        <a href="/micha/resty/downloads" class="download-source" id="download_button" title="Download source, tagged packages and binaries."><span class="icon"></span>Downloads</a>

      <div id="repository_desc_wrapper">
      <div id="repository_description" rel="repository_description_edit">
        
          <p>Little command line REST client that you can use in pipelines (bash or zsh).
            <span id="read_more" style="display:none">&mdash; <a href="#readme">Read more</a></span>
          </p>
        
      </div>

      <div id="repository_description_edit" style="display:none;" class="inline-edit">
        <form action="/micha/resty/admin/update" method="post"><div style="margin:0;padding:0"><input name="authenticity_token" type="hidden" value="1ac9dae8d32ef6233ac6b71b2c611b739750f84b" /></div>
          <input type="hidden" name="field" value="repository_description">
          <input type="text" class="textfield" name="value" value="Little command line REST client that you can use in pipelines (bash or zsh).">
          <div class="form-actions">
            <button class="minibutton"><span>Save</span></button> &nbsp; <a href="#" class="cancel">Cancel</a>
          </div>
        </form>
      </div>

      
      <div class="repository-homepage" id="repository_homepage" rel="repository_homepage_edit">
        <p><a href="http://thinkminimo.com" rel="nofollow">http://thinkminimo.com</a></p>
      </div>

      <div id="repository_homepage_edit" style="display:none;" class="inline-edit">
        <form action="/micha/resty/admin/update" method="post"><div style="margin:0;padding:0"><input name="authenticity_token" type="hidden" value="1ac9dae8d32ef6233ac6b71b2c611b739750f84b" /></div>
          <input type="hidden" name="field" value="repository_homepage">
          <input type="text" class="textfield" name="value" value="http://thinkminimo.com">
          <div class="form-actions">
            <button class="minibutton"><span>Save</span></button> &nbsp; <a href="#" class="cancel">Cancel</a>
          </div>
        </form>
      </div>
      </div>
      <div class="rule "></div>
            <div id="url_box" class="url-box">
        <ul class="clone-urls">
          
            
            <li id="http_clone_url"><a href="https://github.com/micha/resty.git" data-permissions="Read-Only">HTTP</a></li>
            <li id="public_clone_url"><a href="git://github.com/micha/resty.git" data-permissions="Read-Only">Git Read-Only</a></li>
          
          
        </ul>
        <input type="text" spellcheck="false" id="url_field" class="url-field" />
              <span style="display:none" id="url_box_clippy"></span>
      <span id="clippy_tooltip_url_box_clippy" class="clippy-tooltip tooltipped" title="copy to clipboard">
      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="14"
              height="14"
              class="clippy"
              id="clippy" >
      <param name="movie" value="https://assets1.github.com/flash/clippy.swf?v5"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param NAME="FlashVars" value="id=url_box_clippy&amp;copied=&amp;copyto=">
      <param name="bgcolor" value="#FFFFFF">
      <param name="wmode" value="opaque">
      <embed src="https://assets1.github.com/flash/clippy.swf?v5"
             width="14"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="id=url_box_clippy&amp;copied=&amp;copyto="
             bgcolor="#FFFFFF"
             wmode="opaque"
      />
      </object>
      </span>

        <p id="url_description">This URL has <strong>Read+Write</strong> access</p>
      </div>
    </div>


        

      </div><!-- /.pagehead -->

      









<script type="text/javascript">
  GitHub.currentCommitRef = 'master'
  GitHub.currentRepoOwner = 'micha'
  GitHub.currentRepo = "resty"
  GitHub.downloadRepo = '/micha/resty/archives/master'
  GitHub.revType = "master"

  GitHub.controllerName = "tree"
  GitHub.actionName     = "show"
  GitHub.currentAction  = "tree#show"

  

  
</script>








  <div id="commit">
    <div class="group">
        
  <div class="envelope commit">
    <div class="human">
      
        <div class="message"><pre><a href="/micha/resty/commit/42baf7257a3238423d2e94104d560f15b033ab61">Fix docs/issue qmacro#8</a> </pre></div>
      

      <div class="actor">
        <div class="gravatar">
          
          <img src="https://secure.gravatar.com/avatar/85e6db99731aaba43d6b7863970c43aa?s=140&d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-140.png" alt="" width="30" height="30"  />
        </div>
        <div class="name"><a href="/micha">micha</a> <span>(author)</span></div>
        <div class="date">
          <abbr class="relatize" title="2010-12-05 10:56:22">Sun Dec 05 10:56:22 -0800 2010</abbr>
        </div>
      </div>

      

    </div>
    <div class="machine">
      <span>c</span>ommit&nbsp;&nbsp;<a href="/micha/resty/commit/42baf7257a3238423d2e94104d560f15b033ab61" hotkey="c">42baf7257a3238423d2e</a><br />
      <span>t</span>ree&nbsp;&nbsp;&nbsp;&nbsp;<a href="/micha/resty/tree/42baf7257a3238423d2e94104d560f15b033ab61" hotkey="t">6ca7de3a313c39b2d4cf</a><br />
      
        <span>p</span>arent&nbsp;
        
        <a href="/micha/resty/tree/5b3e36c695c496d814a0c60900fb23224f72c999" hotkey="p">5b3e36c695c496d814a0</a>
      

    </div>
  </div>

    </div>
  </div>



<div id="slider">
  
    <div class="breadcrumb" data-path="/">
      <b><a href="/micha/resty/tree/42baf7257a3238423d2e94104d560f15b033ab61">resty</a></b> / 
    </div>

    
      


  <div class="frames">
    <div class="frame frame-center" data-path="/">
      <table id="browser" cellpadding="0" cellspacing="0">
        <tr class="header">
          <th></th>
          <th>name</th>
          <th>age</th>
          <th>
            <div class="history">
              <a href="/micha/resty/commits/master/">history</a>
            </div>
            message
          </th>
        </tr>

        

        
        
                    <tr class="alt">
            <td class="icon"> <img alt="file" src="https://assets2.github.com/images/icons/txt.png?52a04f4d5bac1e6525ba43735c8142489bd7a665" /> </td>
            <td class="content"> <a href="/micha/resty/blob/42baf7257a3238423d2e94104d560f15b033ab61/.gitignore" class="js-slide-to" id="44fa52061b98909b010925663c0cce9865425b72">.gitignore</a></td>
            
            <td class="age"> <span class="relatize">Sun Oct 10 15:00:49 -0700 2010</span> </td>
            <td class="message"> <a href="/micha/resty/commit/a2c4047721e0348af3e8f29fbd95a1dcaa601a71" class="message" title="fix issue with link reference rewriting when hidden links are present">fix issue with link reference rewriting when hi...</a> [<a href="/micha">micha</a>] </td>
          </tr>
        
                    <tr class="">
            <td class="icon"> <img alt="file" src="https://assets2.github.com/images/icons/txt.png?52a04f4d5bac1e6525ba43735c8142489bd7a665" /> </td>
            <td class="content"> <a href="/micha/resty/blob/42baf7257a3238423d2e94104d560f15b033ab61/README.markdown" class="js-slide-to" id="fac12c3c447b1a319230663a6079c1214debb62c">README.markdown</a></td>
            
            <td class="age"> <span class="relatize">Sun Dec 05 10:56:22 -0800 2010</span> </td>
            <td class="message"> <a href="/micha/resty/commit/42baf7257a3238423d2e94104d560f15b033ab61" class="message" title="Fix docs/issue qmacro#8">Fix docs/issue qmacro#8</a> [<a href="/micha">micha</a>] </td>
          </tr>
        
                    <tr class="alt">
            <td class="icon"> <img alt="file" src="https://assets2.github.com/images/icons/txt.png?52a04f4d5bac1e6525ba43735c8142489bd7a665" /> </td>
            <td class="content"> <a href="/micha/resty/blob/42baf7257a3238423d2e94104d560f15b033ab61/pp" class="js-slide-to" id="e413b26e023731bdcfff115d84ed976eb96e9731">pp</a></td>
            
            <td class="age"> <span class="relatize">Mon Aug 03 18:42:01 -0700 2009</span> </td>
            <td class="message"> <a href="/micha/resty/commit/4d1b8bed5a9dd5173668e670c759dea25647a896" class="message" title="urlencode square brackets">urlencode square brackets</a> [<a href="/micha">micha</a>] </td>
          </tr>
        
                    <tr class="">
            <td class="icon"> <img alt="file" src="https://assets2.github.com/images/icons/txt.png?52a04f4d5bac1e6525ba43735c8142489bd7a665" /> </td>
            <td class="content"> <a href="/micha/resty/blob/42baf7257a3238423d2e94104d560f15b033ab61/pypp" class="js-slide-to" id="c3dc90eacfad94ae57528dd834619b1ee6928b37">pypp</a></td>
            
            <td class="age"> <span class="relatize">Thu Sep 30 14:26:32 -0700 2010</span> </td>
            <td class="message"> <a href="/micha/resty/commit/8b0c83f194d3dd214491015925f9cdae472fa755" class="message" title="pypp - don't output space after comma at EOL">pypp - don't output space after comma at EOL</a> [<a href="/adamv">adamv</a>] </td>
          </tr>
        
                    <tr class="alt">
            <td class="icon"> <img alt="file" src="https://assets2.github.com/images/icons/txt.png?52a04f4d5bac1e6525ba43735c8142489bd7a665" /> </td>
            <td class="content"> <a href="/micha/resty/blob/42baf7257a3238423d2e94104d560f15b033ab61/resty" class="js-slide-to" id="75d458138bec1e30f08b89e09ae2d17a25e1d5c6">resty</a></td>
            
            <td class="age"> <span class="relatize">Wed Oct 20 13:27:47 -0700 2010</span> </td>
            <td class="message"> <a href="/micha/resty/commit/960d30b4f278c81f2f40c4c6a784b848b632fef2" class="message" title="Added [-W] option when sourcing script to disable writing to history file, and a [remote] argument so you can set the initial URI base at the same time as you source the script.">Added [-W] option when sourcing script to disab...</a> [<a href="/micha">micha</a>] </td>
          </tr>
        
      </table>
    </div>
  </div>
  <br style="clear:both;">


<br style="clear:both;">

<div class="frame frame-loading" style="display:none;">
  <img src="/images/modules/ajax/big_spinner_336699.gif">
</div>
    

  

      
    <div id="readme" class="announce markdown" data-path="/"><span class="name">README.markdown</span><div class="wikistyle"><h1>Resty</h1>

<p>Resty is a tiny script wrapper for <a href="http://curl.haxx.se/">curl</a>. It
provides a simple, concise shell interface for interacting with
<a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a> services.
Since it is implemented as functions in your shell and not in its own separate
command environment you have access to all the powerful shell tools, such
as perl, awk, grep, sed, etc. You can use resty in pipelines to process data
from REST services, and PUT or POST the data right back.  You can even pipe
the data in and then edit it interactively in your text editor prior to PUT
or POST.</p>

<p>Cookies are supported automatically and stored in a file locally. Most of
the arguments are remembered from one call to the next to save typing. It
has pretty good defaults for most purposes. Additionally, resty allows you
to easily provide your own options to be passed directly to curl, so even
the most complex requests can be accomplished with the minimum amount of
command line pain.</p>

<p><a href="http://blog.fupps.com/2010/04/26/resty/">Here is a nice screencast showing resty in action</a> (by Jan-Piet Mens).</p>

<h1>Quick Start</h1>

<p>You have <code>curl</code>, right? Okay.</p>

<pre><code>  curl -L http://github.com/micha/resty/raw/master/resty &gt; resty
</code></pre>

<p>Source the script before using it. (You can put this line in your <code>~/.bashrc</code>
file if you want, or just paste the contents of the <code>resty</code> script right in
there. Either way works.)</p>

<pre><code>  . resty
</code></pre>

<p>Set the REST host to which you will be making your requests (you can do this
whenever you want to change hosts, anytime).</p>

<pre><code>  resty http://127.0.0.1:8080/data
</code></pre>

<p>Make some HTTP requests.</p>

<pre><code>  GET /blogs.json
  PUT /blogs/2.json '{"title" : "updated post", "body" : "This is the new."}'
  DELETE /blogs/2
  POST /blogs.json '{"title" : "new post", "body" : "This is the new new."}'
</code></pre>

<h1>Usage</h1>

<pre><code>  source resty [-W] [remote]              # load functions into shell
  resty                                   # prints current request URI base
  resty &lt;remote&gt;                          # sets the base request URI
  GET [path] [-Z] [curl opts]             # does the GET request 
  DELETE [path] [-Z] [curl opts]          # does DELETE request 
  PUT [path] [data|-V] [-Z] [curl opts]   # does PUT request
  POST [path] [data|-V] [-Z] [curl opts]  # does POST request

  Options:

  -W            Don't write to history file (only when sourcing script).
  -V            Edit the input data interactively in 'vi'. (PUT and POST
                requests only, with data piped to stdin.)
  -Z            Raw output. This disables any processing of HTML in the
                response.
</code></pre>

<h1>Request URI Base</h1>

<p>The request URI base is what the eventual URI to which the requests will be
made is based on. Specifically, it is a URI that may contain the <code>*</code> character
one or more times. The <code>*</code> will be replaced with the <code>path</code> parameter in the
<code>GET</code>, <code>POST</code>, <code>PUT</code>, or <code>DELETE</code> request as described above.</p>

<p>For example:</p>

<pre><code>  resty 'http://127.0.0.1:8080/data*.json'
</code></pre>

<p>and then</p>

<pre><code>  GET /5
</code></pre>

<p>would result in a <code>GET</code> request to the URI <code>http://127.0.0.1:8080/data/5.json</code>.</p>

<p>If no <code>*</code> character is specified when setting the base URI, it's just added
onto the end for you automatically.</p>

<h2>HTTPS URIs</h2>

<p>HTTPS URIs can be used, as well. For example:</p>

<pre><code>  resty 'https://example.com/doit'
</code></pre>

<h2>URI Base History</h2>

<p>The URI base is saved to an rc file (<em>~/.resty/host</em>) each time it's set,
and the last setting is saved in an environment variable (<code>$_resty_host</code>).
The URI base is read from the rc file when resty starts up, but only if the
<code>$_resty_host</code> environment variable is not set.  In this way you can make
requests to different hosts using resty from separate terminals, and have
a different URI base for each terminal.</p>

<p>If you want to see what the current URI base is, just run <code>resty</code> with no
arguments. The URI base will be printed to stdout.</p>

<h1>The Optional Path Parameter</h1>

<p>The HTTP verbs (<code>GET</code>, <code>POST</code>, <code>PUT</code>, and <code>DELETE</code>) first argument is always
an optional URI path. This path must always start with a <code>/</code> character. If
the path parameter is not provided on the command line, resty will just use
the last path it was provided with. This "last path" is stored in an
environment variable (<code>$_resty_path</code>), so each terminal basically has its
own "last path".</p>

<h2>URL Encoding Of Path Parameter</h2>

<p>Resty will always [URL encode]
(http://www.blooberry.com/indexdot/html/topics/urlencoding.htm) the path,
except for slashes. (Slashes in path elements need to be manually encoded as
<code>%2F</code>.) This means that the <code>?</code>, <code>=</code>, and <code>&amp;</code> characters will be encoded, as
well as some other problematic characters. See the query string howto below
for the way to send query parameters in GET requests.</p>

<h1>POST/PUT Requests and Data</h1>

<p>Normally you would probably want to provide the request body data right on
the command line like this:</p>

<pre><code>  PUT /blogs/5.json '{"title" : "hello", "body" : "this is it"}'
</code></pre>

<p>But sometimes you will want to send the request body from a file instead. To
do that you pipe in the contents of the file:</p>

<pre><code>  PUT /blogs/5.json &lt; /tmp/t
</code></pre>

<p>Or you can pipe the data from another program, like this:</p>

<pre><code>  myprog | PUT /blogs/5.json
</code></pre>

<p>Or, interestingly, as a filter pipeline with
<a href="http://github.com/micha/jsawk">jsawk</a>:</p>

<pre><code>  GET /blogs/5.json | jsawk 'this.author="Bob Smith";this.tags.push("news")' | PUT
</code></pre>

<p>Notice how the <code>path</code> argument is omitted from the <code>PUT</code> command.</p>

<h2>Edit PUT/POST Data In Vi</h2>

<p>With the <code>-V</code> options you can pipe data into <code>PUT</code> or <code>POST</code>, edit it in vi,
save the data (using <code>:wq</code> in vi, as normal) and the resulting data is then
PUT or POSTed. This is similar to the way <code>visudo</code> works, for example.</p>

<pre><code>  GET /blogs/2 | PUT -V
</code></pre>

<p>This fetches the data and lets you edit it, and then does a PUT on the
resource. If you don't like vi you can specify your preferred editor by
setting the <code>EDITOR</code> environment variable.</p>

<h1>Errors and Output</h1>

<p>For successful 2xx responses, the response body is printed on stdout. You
can pipe the output to stuff, process it, and then pipe it back to resty,
if you want.</p>

<p>For responses other than 2xx the response body is dumped to stderr.</p>

<p>In either case, if the content type of the response is <code>text/html</code>, then
resty will try to process the response through either <code>lynx</code>, <code>html2text</code>,
or, finally, <code>cat</code>, depending on which of those programs are available on
your system.</p>

<h2>Raw Output (-Z option)</h2>

<p>If you don't want resty to process the output through lynx or html2text you
can use the <code>-Z</code> option, and get the raw output.</p>

<h1>Passing Command Line Options To Curl</h1>

<p>Anything after the (optional) <code>path</code> and <code>data</code> arguments is passed on to
<code>curl</code>.</p>

<p>For example:</p>

<pre><code>  GET /blogs.json -H "Range: items=1-10"
</code></pre>

<p>The <code>-H "Range: items=1-10"</code> argument will be passed to <code>curl</code> for you. This
makes it possible to do some more complex operations when necessary.</p>

<pre><code>  POST -v -u user:test
</code></pre>

<p>In this example the <code>path</code> and <code>data</code> arguments were left off, but <code>-v</code> and
<code>-u user:test</code> will be passed through to <code>curl</code>, as you would expect.</p>

<p>Here are some useful options to try:</p>

<ul>
<li>
<strong>-v</strong> verbose output, shows HTTP headers and status on stderr</li>
<li>
<strong>-j</strong> junk session cookies (refresh cookie-based session)</li>
<li>
<strong>-u &lt;username:password&gt;</strong> HTTP basic authentication</li>
<li>
<strong>-H &lt;header&gt;</strong> add request header (this option can be added more than
once)</li>
<li>
<strong>-d/-G</strong> send query string parameters with a GET request (see below)</li>
</ul><h2>Query Strings For GET Requests</h2>

<p>Since the path parameter is URL encoded, the best way to send query parameters
in GET requests is by using curl's commnand line arguments. For example,
to make a GET request to <code>/Something?foo=bar&amp;baz=baf</code> you would do:</p>

<pre><code>  GET /Something -d foo=bar -d baz=baf -G
</code></pre>

<p>This sends the name/value pairs specified with the <code>-d</code> options as a query
string in the URL.</p>

<h2>Per-Host/Per-Method Curl Configuration Files</h2>

<p>Resty supports a per-host/per-method configuration file to help you with
frequently used curl options. Each host (including the port) can have its
own configuration file in the <em>~/.resty</em> directory. The file format is</p>

<pre><code>  GET [arg] [arg] ...
  PUT [arg] [arg] ...
  POST [arg] [arg] ...
  DELETE [arg] [arg] ...
</code></pre>

<p>Where the <code>arg</code>s are curl command line arguments. Each line can specify
arguments for that HTTP verb only, and all lines are optional.</p>

<p>So, suppose you find yourself using the same curl options over and over. You
can save them in a file and resty will pass them to curl for you. Say this
is a frequent pattern for you:</p>

<pre><code>  resty localhost:8080
  GET /Blah -H "Accept: application/json"
  GET /Other -H "Accept: application/json"
  ...
  POST /Something -H "Content-Type: text/plain" -u user:pass
  POST /SomethingElse -H "Content-Type: text/plain" -u user:pass
  ...
</code></pre>

<p>It's annoying to add the <code>-H</code> and <code>-u</code> options to curl all the time. So
create a file <em>~/.resty/localhost:8080</em>, like this:</p>

<p><em>~/.resty/localhost:8080</em></p>

<pre><code>  GET -H "Accept: application/json"
  POST -H "Content-Type: text/plain" -u user:pass
</code></pre>

<p>Then any GET or POST requests to localhost:8080 will have the specified
options prepended to the curl command line arguments, saving you from having
to type them out each time, like this:</p>

<pre><code>  GET /Blah
  GET /Other
  ...
  POST /Something
  POST /SomethingElse
  ...
</code></pre>

<p>Sweet! Much better.</p>

<h1>Exit Status</h1>

<p>Successful requests (HTTP respose with 2xx status) return zero.
Otherwise, the first digit of the response status is returned (i.e., 1 for
1xx, 3 for 3xx, 4 for 4xx, etc.) This is because the exit status is an 8 bit
integer---it can't be greater than 255. If you want the exact status code
you can always just pass the <code>-v</code> option to curl.</p>

<h1>Using Resty In Shell Scripts</h1>

<p>Since resty creates the REST verb functions in the shell, when using it from a script you must <code>source</code> it before you use any of the functions. However, it's likely that you don't want it to be overwriting the resty host history file, and you will almost always want to set the URI base explicitly.</p>

<pre><code>  #!/usr/bin/env bash

  # Load resty, don't write to the history file, and set the URI base
  . /path/to/resty -W 'https://myhost.com/data*.json'

  # GET the JSON list of users, set each of their 'disabled' properties
  # to 'false', and PUT the modified JSON back
  GET /users | jsawk 'this.disabled = false' | PUT
</code></pre>

<p>Here the <code>-W</code> option was used when loading the script to prevent writing to the history file and an initial URI base was set at the same time. Then a JSON file was fetched, edited using <a href="http://github.com/micha/jsawk">jsawk</a>, and re-uploaded to the server.</p>

<h1>Working With JSON</h1>

<p>JSON REST web services require some special tools to make them accessible
and easily manipulated in the shell environment. The following are a few
scripts that make dealing with JSON data easier.</p>

<ul>
<li>
<p><a href="http://github.com/micha/jsawk">Jsawk</a> can be used to process and filter
JSON data from and to resty, in a shell pipeline. This takes care of
parsing the input JSON correctly, rather than using regexes and sed,
awk, perl or the like, and prints the resulting output in correct JSON
format, as well.</p>

<p><code>GET /blogs.json |jsawk -n 'out(this.title)' # prints all the blog titles</code></p>
</li>
<li>
<p>The included <code>pp</code> script will pretty-print JSON for you. You just need to
install the JSON perl module from CPAN or you can use <code>pypp</code> if you have
python 2.6 installed.</p>

<p><code>GET /blogs.json |pp # pretty-prints the JSON output from resty</code></p>
</li>
</ul></div></div>
  </div>



    </div>
  
      
    </div>

    <div id="footer" class="clearfix">
      <div class="site">
        <div class="sponsor">
          <a href="http://www.rackspace.com" class="logo">
            <img alt="Dedicated Server" src="https://assets3.github.com/images/modules/footer/rackspace_logo.png?v2?52a04f4d5bac1e6525ba43735c8142489bd7a665" />
          </a>
          Powered by the <a href="http://www.rackspace.com ">Dedicated
          Servers</a> and<br/> <a href="http://www.rackspacecloud.com">Cloud
          Computing</a> of Rackspace Hosting<span>&reg;</span>
        </div>

        <ul class="links">
          <li class="blog"><a href="https://github.com/blog">Blog</a></li>
          <li><a href="http://support.github.com">Support</a></li>
          <li><a href="https://github.com/training">Training</a></li>
          <li><a href="http://jobs.github.com">Job Board</a></li>
          <li><a href="http://shop.github.com">Shop</a></li>
          <li><a href="https://github.com/contact">Contact</a></li>
          <li><a href="http://develop.github.com">API</a></li>
          <li><a href="http://status.github.com">Status</a></li>
        </ul>
        <ul class="sosueme">
          <li class="main">&copy; 2010 <span id="_rrt" title="0.04928s from fe5.rs.github.com">GitHub</span> Inc. All rights reserved.</li>
          <li><a href="/site/terms">Terms of Service</a></li>
          <li><a href="/site/privacy">Privacy</a></li>
          <li><a href="https://github.com/security">Security</a></li>
        </ul>
      </div>
    </div><!-- /#footer -->

    
      
      
        <!-- current locale:  -->
        <div class="locales">
          <div class="site">

            <ul class="choices clearfix limited-locales">
              <li><span class="current">English</span></li>
              
                  <li><a rel="nofollow" href="?locale=de">Deutsch</a></li>
              
                  <li><a rel="nofollow" href="?locale=fr">Français</a></li>
              
                  <li><a rel="nofollow" href="?locale=ja">日本語</a></li>
              
                  <li><a rel="nofollow" href="?locale=pt-BR">Português (BR)</a></li>
              
                  <li><a rel="nofollow" href="?locale=ru">Русский</a></li>
              
                  <li><a rel="nofollow" href="?locale=zh">中文</a></li>
              
              <li class="all"><a href="#" class="minibutton btn-forward js-all-locales"><span><span class="icon"></span>See all available languages</span></a></li>
            </ul>

            <div class="all-locales clearfix">
              <h3>Your current locale selection: <strong>English</strong>. Choose another?</h3>
              
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=en">English</a></li>
                  
                      <li><a rel="nofollow" href="?locale=af">Afrikaans</a></li>
                  
                      <li><a rel="nofollow" href="?locale=ca">Català</a></li>
                  
                      <li><a rel="nofollow" href="?locale=cs">Čeština</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=de">Deutsch</a></li>
                  
                      <li><a rel="nofollow" href="?locale=es">Español</a></li>
                  
                      <li><a rel="nofollow" href="?locale=fr">Français</a></li>
                  
                      <li><a rel="nofollow" href="?locale=hr">Hrvatski</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=id">Indonesia</a></li>
                  
                      <li><a rel="nofollow" href="?locale=it">Italiano</a></li>
                  
                      <li><a rel="nofollow" href="?locale=ja">日本語</a></li>
                  
                      <li><a rel="nofollow" href="?locale=nl">Nederlands</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=no">Norsk</a></li>
                  
                      <li><a rel="nofollow" href="?locale=pl">Polski</a></li>
                  
                      <li><a rel="nofollow" href="?locale=pt-BR">Português (BR)</a></li>
                  
                      <li><a rel="nofollow" href="?locale=ru">Русский</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=sr">Српски</a></li>
                  
                      <li><a rel="nofollow" href="?locale=sv">Svenska</a></li>
                  
                      <li><a rel="nofollow" href="?locale=zh">中文</a></li>
                  
                </ul>
              
            </div>

          </div>
          <div class="fade"></div>
        </div>
      
    

    <script>window._auth_token = "1ac9dae8d32ef6233ac6b71b2c611b739750f84b"</script>
    <div id="keyboard_shortcuts_pane" style="display:none">
  <h2>Keyboard Shortcuts</h2>

  <div class="columns threecols">
    <div class="column first">
      <h3>Site wide shortcuts</h3>
      <dl class="keyboard-mappings">
        <dt>s</dt>
        <dd>Focus site search</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>?</dt>
        <dd>Bring up this help dialog</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column middle">
      <h3>Commit list</h3>
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selected down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selected up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>t</dt>
        <dd>Open tree</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>p</dt>
        <dd>Open parent</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>c <em>or</em> o <em>or</em> enter</dt>
        <dd>Open commit</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column last">
      <h3>Pull request list</h3>
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selected down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selected up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>o <em>or</em> enter</dt>
        <dd>Open issue</dd>
      </dl>
    </div><!-- /.columns.last -->
  </div><!-- /.columns.equacols -->

  <div class="rule"></div>

  <h3>Issues</h3>

  <div class="columns threecols">
    <div class="column first">
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selected down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selected up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>x</dt>
        <dd>Toggle select target</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>o <em>or</em> enter</dt>
        <dd>Open issue</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column middle">
      <dl class="keyboard-mappings">
        <dt>I</dt>
        <dd>Mark selected as read</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>U</dt>
        <dd>Mark selected as unread</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>e</dt>
        <dd>Close selected</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>y</dt>
        <dd>Remove selected from view</dd>
      </dl>
    </div><!-- /.column.middle -->
    <div class="column last">
      <dl class="keyboard-mappings">
        <dt>c</dt>
        <dd>Create issue</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>l</dt>
        <dd>Create label</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>i</dt>
        <dd>Back to inbox</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>u</dt>
        <dd>Back to issues</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>/</dt>
        <dd>Focus issues search</dd>
      </dl>
    </div>
  </div>

  <div class="rule"></div>

  <h3>Network Graph</h3>
  <div class="columns equacols">
    <div class="column first">
      <dl class="keyboard-mappings">
        <dt>← <em>or</em> h</dt>
        <dd>Scroll left</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>→ <em>or</em> l</dt>
        <dd>Scroll right</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>↑ <em>or</em> k</dt>
        <dd>Scroll up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>↓ <em>or</em> j</dt>
        <dd>Scroll down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>t</dt>
        <dd>Toggle visibility of head labels</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column last">
      <dl class="keyboard-mappings">
        <dt>shift ← <em>or</em> shift h</dt>
        <dd>Scroll all the way left</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>shift → <em>or</em> shift l</dt>
        <dd>Scroll all the way right</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>shift ↑ <em>or</em> shift k</dt>
        <dd>Scroll all the way up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>shift ↓ <em>or</em> shift j</dt>
        <dd>Scroll all the way down</dd>
      </dl>
    </div><!-- /.column.last -->
  </div>

</div>
    

    <!--[if IE 8]>
    <script type="text/javascript" charset="utf-8">
      $(document.body).addClass("ie8")
    </script>
    <![endif]-->

    <!--[if IE 7]>
    <script type="text/javascript" charset="utf-8">
      $(document.body).addClass("ie7")
    </script>
    <![endif]-->

    <script type="text/javascript">
      _kmq.push(['trackClick', 'entice-signup-button', 'Entice banner clicked']);
      
    </script>
    
  </body>
</html>

