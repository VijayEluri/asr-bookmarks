
    

  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <title>cliffmoon/scromium - GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />

    <link href="https://assets0.github.com/stylesheets/bundle_common.css?52a04f4d5bac1e6525ba43735c8142489bd7a665" media="screen" rel="stylesheet" type="text/css" />
<link href="https://assets3.github.com/stylesheets/bundle_github.css?52a04f4d5bac1e6525ba43735c8142489bd7a665" media="screen" rel="stylesheet" type="text/css" />

    <script type="text/javascript" charset="utf-8">
      var GitHub = {}
      var github_user = null
      
    </script>
    <script src="https://assets1.github.com/javascripts/jquery/jquery-1.4.2.min.js?52a04f4d5bac1e6525ba43735c8142489bd7a665" type="text/javascript"></script>
    <script src="https://assets1.github.com/javascripts/bundle_common.js?52a04f4d5bac1e6525ba43735c8142489bd7a665" type="text/javascript"></script>
<script src="https://assets2.github.com/javascripts/bundle_github.js?52a04f4d5bac1e6525ba43735c8142489bd7a665" type="text/javascript"></script>


        <script type="text/javascript" charset="utf-8">
      GitHub.spy({
        repo: "cliffmoon/scromium"
      })
    </script>

    
  
    
  

  <link href="https://github.com/cliffmoon/scromium/commits/master.atom" rel="alternate" title="Recent Commits to scromium:master" type="application/atom+xml" />

        <meta name="description" content="An idiomatic scala library for interacting with cassandra" />
    <script type="text/javascript">
      GitHub.nameWithOwner = GitHub.nameWithOwner || "cliffmoon/scromium";
      GitHub.currentRef = 'master';
      GitHub.commitSHA = "45bfc175c7d1d600c126984c493a88d0a2c1da66";
      GitHub.currentPath = "";
      GitHub.masterBranch = "master";

      
        GitHub.currentTreeSHA = "45bfc175c7d1d600c126984c493a88d0a2c1da66";
      
    </script>
  

            <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3769691-2']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })();
    </script>

  </head>

  

  <body class="logged_out ">
    

    
      <script type="text/javascript">
        var _kmq = _kmq || [];
        function _kms(u){
          var s = document.createElement('script'); var f = document.getElementsByTagName('script')[0]; s.type = 'text/javascript'; s.async = true;
          s.src = u; f.parentNode.insertBefore(s, f);
        }
        _kms('//i.kissmetrics.com/i.js');_kms('//doug1izaerwt3.cloudfront.net/406e8bf3a2b8846ead55afb3cfaf6664523e3a54.1.js');
      </script>
    

    

    

    

    <div class="subnavd" id="main">
      <div id="header" class="true">
        
          <a class="logo boring" href="https://github.com">
            <img src="/images/modules/header/logov3.png?changed" class="default" alt="github" />
            <![if !IE]>
            <img src="/images/modules/header/logov3-hover.png" class="hover" alt="github" />
            <![endif]>
          </a>
        
        
        <div class="topsearch">
  
    <ul class="nav logged_out">
      <li class="pricing"><a href="/plans">Pricing and Signup</a></li>
      <li><a href="/explore">Explore GitHub</a></li>
      <li><a href="/features">Features</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="https://github.com/login">Login</a></li>
    </ul>
  
</div>

      </div>

      
      
        
    <div class="site">
      <div class="pagehead repohead vis-public   ">

      

      <div class="title-actions-bar">
        <h1>
          <a href="/cliffmoon">cliffmoon</a> / <strong><a href="https://github.com/cliffmoon/scromium">scromium</a></strong>
          
          
        </h1>

        
    <ul class="actions">
      

      
        <li class="for-owner" style="display:none"><a href="https://github.com/cliffmoon/scromium/admin" class="minibutton btn-admin "><span><span class="icon"></span>Admin</span></a></li>
        <li>
          <a href="/cliffmoon/scromium/toggle_watch" class="minibutton btn-watch " id="watch_button" onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', '598b9fa77f363719def7f8d429a3e72543488d77'); f.appendChild(s);f.submit();return false;" style="display:none"><span><span class="icon"></span>Watch</span></a>
          <a href="/cliffmoon/scromium/toggle_watch" class="minibutton btn-watch " id="unwatch_button" onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', '598b9fa77f363719def7f8d429a3e72543488d77'); f.appendChild(s);f.submit();return false;" style="display:none"><span><span class="icon"></span>Unwatch</span></a>
        </li>
        
          
            <li class="for-notforked" style="display:none"><a href="/cliffmoon/scromium/fork" class="minibutton btn-fork " id="fork_button" onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', '598b9fa77f363719def7f8d429a3e72543488d77'); f.appendChild(s);f.submit();return false;"><span><span class="icon"></span>Fork</span></a></li>
            <li class="for-hasfork" style="display:none"><a href="#" class="minibutton btn-fork " id="your_fork_button"><span><span class="icon"></span>Your Fork</span></a></li>
          

          
        
      
      
      <li class="repostats">
        <ul class="repo-stats">
          <li class="watchers"><a href="/cliffmoon/scromium/watchers" title="Watchers" class="tooltipped downwards">62</a></li>
          <li class="forks"><a href="/cliffmoon/scromium/network" title="Forks" class="tooltipped downwards">5</a></li>
        </ul>
      </li>
    </ul>

      </div>

        
  <ul class="tabs">
    <li><a href="https://github.com/cliffmoon/scromium" class="selected" highlight="repo_source">Source</a></li>
    <li><a href="https://github.com/cliffmoon/scromium/commits/master" highlight="repo_commits">Commits</a></li>
    <li><a href="/cliffmoon/scromium/network" highlight="repo_network">Network</a></li>
    <li><a href="/cliffmoon/scromium/pulls" highlight="repo_pulls">Pull Requests (0)</a></li>

    

    
      
      <li><a href="/cliffmoon/scromium/issues" highlight="issues">Issues (0)</a></li>
    

            
    <li><a href="/cliffmoon/scromium/graphs" highlight="repo_graphs">Graphs</a></li>

    <li class="contextswitch nochoices">
      <span class="toggle leftwards" >
        <em>Branch:</em>
        <code>master</code>
      </span>
    </li>
  </ul>

  <div style="display:none" id="pl-description"><p><em class="placeholder">click here to add a description</em></p></div>
  <div style="display:none" id="pl-homepage"><p><em class="placeholder">click here to add a homepage</em></p></div>

  <div class="subnav-bar">
  
  <ul>
    <li>
      <a href="#" class="dropdown">Switch Branches (3)</a>
      <ul>
        
          
          
            <li><a href="/cliffmoon/scromium/tree/cassandra-0.7" action="show">cassandra-0.7</a></li>
          
        
          
          
            <li><a href="/cliffmoon/scromium/tree/gh-pages" action="show">gh-pages</a></li>
          
        
          
            <li><strong>master &#x2713;</strong></li>
            
      </ul>
    </li>
    <li>
      <a href="#" class="dropdown ">Switch Tags (10)</a>
              <ul>
                      
              <li><a href="/cliffmoon/scromium/tree/0.6.4">0.6.4</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.6.2">0.6.2</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.6.1">0.6.1</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.6">0.6</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.4.1">0.4.1</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.4">0.4</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.3">0.3</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.2">0.2</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.1.1">0.1.1</a></li>
            
                      
              <li><a href="/cliffmoon/scromium/tree/0.1.0">0.1.0</a></li>
            
                  </ul>
      
    </li>
    <li>
    
    <a href="/cliffmoon/scromium/branches" class="manage">Branch List</a>
    
    </li>
  </ul>
</div>

  
  
  
  
  
  



        
    <div id="repo_details" class="metabox clearfix">
      <div id="repo_details_loader" class="metabox-loader" style="display:none">Sending Request&hellip;</div>

        <a href="/cliffmoon/scromium/downloads" class="download-source" id="download_button" title="Download source, tagged packages and binaries."><span class="icon"></span>Downloads</a>

      <div id="repository_desc_wrapper">
      <div id="repository_description" rel="repository_description_edit">
        
          <p>An idiomatic scala library for interacting with cassandra
            <span id="read_more" style="display:none">&mdash; <a href="#readme">Read more</a></span>
          </p>
        
      </div>

      <div id="repository_description_edit" style="display:none;" class="inline-edit">
        <form action="/cliffmoon/scromium/admin/update" method="post"><div style="margin:0;padding:0"><input name="authenticity_token" type="hidden" value="598b9fa77f363719def7f8d429a3e72543488d77" /></div>
          <input type="hidden" name="field" value="repository_description">
          <input type="text" class="textfield" name="value" value="An idiomatic scala library for interacting with cassandra">
          <div class="form-actions">
            <button class="minibutton"><span>Save</span></button> &nbsp; <a href="#" class="cancel">Cancel</a>
          </div>
        </form>
      </div>

      
      <div class="repository-homepage" id="repository_homepage" rel="repository_homepage_edit">
        <p><a href="http://" rel="nofollow"></a></p>
      </div>

      <div id="repository_homepage_edit" style="display:none;" class="inline-edit">
        <form action="/cliffmoon/scromium/admin/update" method="post"><div style="margin:0;padding:0"><input name="authenticity_token" type="hidden" value="598b9fa77f363719def7f8d429a3e72543488d77" /></div>
          <input type="hidden" name="field" value="repository_homepage">
          <input type="text" class="textfield" name="value" value="">
          <div class="form-actions">
            <button class="minibutton"><span>Save</span></button> &nbsp; <a href="#" class="cancel">Cancel</a>
          </div>
        </form>
      </div>
      </div>
      <div class="rule "></div>
            <div id="url_box" class="url-box">
        <ul class="clone-urls">
          
            
            <li id="http_clone_url"><a href="https://github.com/cliffmoon/scromium.git" data-permissions="Read-Only">HTTP</a></li>
            <li id="public_clone_url"><a href="git://github.com/cliffmoon/scromium.git" data-permissions="Read-Only">Git Read-Only</a></li>
          
          
        </ul>
        <input type="text" spellcheck="false" id="url_field" class="url-field" />
              <span style="display:none" id="url_box_clippy"></span>
      <span id="clippy_tooltip_url_box_clippy" class="clippy-tooltip tooltipped" title="copy to clipboard">
      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="14"
              height="14"
              class="clippy"
              id="clippy" >
      <param name="movie" value="https://assets1.github.com/flash/clippy.swf?v5"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param NAME="FlashVars" value="id=url_box_clippy&amp;copied=&amp;copyto=">
      <param name="bgcolor" value="#FFFFFF">
      <param name="wmode" value="opaque">
      <embed src="https://assets1.github.com/flash/clippy.swf?v5"
             width="14"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="id=url_box_clippy&amp;copied=&amp;copyto="
             bgcolor="#FFFFFF"
             wmode="opaque"
      />
      </object>
      </span>

        <p id="url_description">This URL has <strong>Read+Write</strong> access</p>
      </div>
    </div>


        

      </div><!-- /.pagehead -->

      









<script type="text/javascript">
  GitHub.currentCommitRef = 'master'
  GitHub.currentRepoOwner = 'cliffmoon'
  GitHub.currentRepo = "scromium"
  GitHub.downloadRepo = '/cliffmoon/scromium/archives/master'
  GitHub.revType = "master"

  GitHub.controllerName = "tree"
  GitHub.actionName     = "show"
  GitHub.currentAction  = "tree#show"

  

  
</script>








  <div id="commit">
    <div class="group">
        
  <div class="envelope commit">
    <div class="human">
      
        <div class="message"><pre><a href="/cliffmoon/scromium/commit/45bfc175c7d1d600c126984c493a88d0a2c1da66">patches to cassandra for new stages</a> </pre></div>
      

      <div class="actor">
        <div class="gravatar">
          
          <img src="https://secure.gravatar.com/avatar/d62f7f73d27364e867ba0c384a3446c0?s=140&d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-140.png" alt="" width="30" height="30"  />
        </div>
        <div class="name"><a href="/cliffmoon">cliffmoon</a> <span>(author)</span></div>
        <div class="date">
          <abbr class="relatize" title="2010-09-30 08:48:25">Thu Sep 30 08:48:25 -0700 2010</abbr>
        </div>
      </div>

      

    </div>
    <div class="machine">
      <span>c</span>ommit&nbsp;&nbsp;<a href="/cliffmoon/scromium/commit/45bfc175c7d1d600c126984c493a88d0a2c1da66" hotkey="c">45bfc175c7d1d600c126</a><br />
      <span>t</span>ree&nbsp;&nbsp;&nbsp;&nbsp;<a href="/cliffmoon/scromium/tree/45bfc175c7d1d600c126984c493a88d0a2c1da66" hotkey="t">8ff1bf5d0e87155febfc</a><br />
      
        <span>p</span>arent&nbsp;
        
        <a href="/cliffmoon/scromium/tree/659a42cb0d921aed256e156f7769315667c48780" hotkey="p">659a42cb0d921aed256e</a>
      

    </div>
  </div>

    </div>
  </div>



<div id="slider">
  
    <div class="breadcrumb" data-path="/">
      <b><a href="/cliffmoon/scromium/tree/45bfc175c7d1d600c126984c493a88d0a2c1da66">scromium</a></b> / 
    </div>

    
      


  <div class="frames">
    <div class="frame frame-center" data-path="/">
      <table id="browser" cellpadding="0" cellspacing="0">
        <tr class="header">
          <th></th>
          <th>name</th>
          <th>age</th>
          <th>
            <div class="history">
              <a href="/cliffmoon/scromium/commits/master/">history</a>
            </div>
            message
          </th>
        </tr>

        

        
        
                    <tr class="alt">
            <td class="icon"> <img alt="directory" src="https://assets3.github.com/images/icons/dir.png?71c6ecd40e6b815bc18ef3f76c3f5f31c23306fd" /> </td>
            <td class="content"> <a href="/cliffmoon/scromium/tree/45bfc175c7d1d600c126984c493a88d0a2c1da66/lib" class="js-slide-to" id="5f5d8687d14f61ce5c6756296e36227d6775fb8d">lib/</a></td>
            
            <td class="age"> <span class="relatize">Thu Sep 30 08:48:25 -0700 2010</span> </td>
            <td class="message"> <a href="/cliffmoon/scromium/commit/45bfc175c7d1d600c126984c493a88d0a2c1da66" class="message" title="patches to cassandra for new stages">patches to cassandra for new stages</a> [<a href="/cliffmoon">cliffmoon</a>] </td>
          </tr>
        
                    <tr class="">
            <td class="icon"> <img alt="directory" src="https://assets3.github.com/images/icons/dir.png?71c6ecd40e6b815bc18ef3f76c3f5f31c23306fd" /> </td>
            <td class="content"> <a href="/cliffmoon/scromium/tree/45bfc175c7d1d600c126984c493a88d0a2c1da66/project" class="js-slide-to" id="abdce82336f14924e6f3e689c032d7cec69d03ec">project/</a></td>
            
            <td class="age"> <span class="relatize">Tue Sep 21 09:57:25 -0700 2010</span> </td>
            <td class="message"> <a href="/cliffmoon/scromium/commit/649a5421b9146fdad59d2a00817eb88de3fd6b34" class="message" title="bump the version number ya goof">bump the version number ya goof</a> [<a href="/cliffmoon">cliffmoon</a>] </td>
          </tr>
        
                    <tr class="alt">
            <td class="icon"> <img alt="directory" src="https://assets3.github.com/images/icons/dir.png?71c6ecd40e6b815bc18ef3f76c3f5f31c23306fd" /> </td>
            <td class="content"> <a href="/cliffmoon/scromium/tree/45bfc175c7d1d600c126984c493a88d0a2c1da66/src" class="js-slide-to" id="4c7f611d9f8c0b4a7fa05f6bb9fee45747d4baa4">src/</a></td>
            
            <td class="age"> <span class="relatize">Wed Sep 29 11:11:41 -0700 2010</span> </td>
            <td class="message"> <a href="/cliffmoon/scromium/commit/659a42cb0d921aed256e156f7769315667c48780" class="message" title="better logging">better logging</a> [<a href="/cliffmoon">cliffmoon</a>] </td>
          </tr>
        
                    <tr class="">
            <td class="icon"> <img alt="file" src="https://assets0.github.com/images/icons/txt.png?71c6ecd40e6b815bc18ef3f76c3f5f31c23306fd" /> </td>
            <td class="content"> <a href="/cliffmoon/scromium/blob/45bfc175c7d1d600c126984c493a88d0a2c1da66/.gitignore" class="js-slide-to" id="e59123bd5cb5dbf29887fe6712735f43a34e9df0">.gitignore</a></td>
            
            <td class="age"> <span class="relatize">Mon Mar 08 22:51:27 -0800 2010</span> </td>
            <td class="message"> <a href="/cliffmoon/scromium/commit/91ec0aaf969bb10b4dffc055dcb0ef4dab8d2c82" class="message" title="sbt standard git ignore">sbt standard git ignore</a> [<a href="/cliffmoon">cliffmoon</a>] </td>
          </tr>
        
                    <tr class="alt">
            <td class="icon"> <img alt="file" src="https://assets0.github.com/images/icons/txt.png?71c6ecd40e6b815bc18ef3f76c3f5f31c23306fd" /> </td>
            <td class="content"> <a href="/cliffmoon/scromium/blob/45bfc175c7d1d600c126984c493a88d0a2c1da66/LICENSE" class="js-slide-to" id="0062f2a7fbdb91b3f1b0ea583d48f8aa69eda913">LICENSE</a></td>
            
            <td class="age"> <span class="relatize">Thu Mar 11 11:30:43 -0800 2010</span> </td>
            <td class="message"> <a href="/cliffmoon/scromium/commit/618c2e2d16f723b4c9725330b5b76198a6d79ec2" class="message" title="apache 2.0 license">apache 2.0 license</a> [<a href="/cliffmoon">cliffmoon</a>] </td>
          </tr>
        
                    <tr class="">
            <td class="icon"> <img alt="file" src="https://assets0.github.com/images/icons/txt.png?71c6ecd40e6b815bc18ef3f76c3f5f31c23306fd" /> </td>
            <td class="content"> <a href="/cliffmoon/scromium/blob/45bfc175c7d1d600c126984c493a88d0a2c1da66/readme.mdown" class="js-slide-to" id="0a206af37b8f0c2f5c45d48a0b26c36c473bd59c">readme.mdown</a></td>
            
            <td class="age"> <span class="relatize">Sat Sep 18 10:00:55 -0700 2010</span> </td>
            <td class="message"> <a href="/cliffmoon/scromium/commit/487b328f4d74a288ac90157f2c9df374107c96cb" class="message" title="Merge remote branch 'ceocoder/cassandra-0.7'">Merge remote branch 'ceocoder/cassandra-0.7'</a> [<a href="/cliffmoon">cliffmoon</a>] </td>
          </tr>
        
      </table>
    </div>
  </div>
  <br style="clear:both;">


<br style="clear:both;">

<div class="frame frame-loading" style="display:none;">
  <img src="/images/modules/ajax/big_spinner_336699.gif">
</div>
    

  

      
    <div id="readme" class="announce mdown" data-path="/"><span class="name">readme.mdown</span><div class="wikistyle"><h1>Scromium</h1>

<p>Scromium is a scala library for dealing with the utter shit show that is the
cassandra thrift API.  Assuming you use SBT, pull scromium into your project thusly:</p>

<pre><code>val scromiumRepo = "Cliff's Scromium Repo" at "http://cliffmoon.github.com/scromium/repository/"
val scromium = "scromium" %% "scromium" % "0.6.4" artifacts 
  Artifact("scromium-all_2.8.0", "all", "jar")
</code></pre>

<p>Why the extra artifact?  We'll get to that.</p>

<h2>Features</h2>

<ul>
<li>Chainable API for building up queries and inserts.</li>
<li>Exposes most (not all) of Cassandra's thrift API in a typesafe manner.</li>
<li>Implicit serialization and deserialization API's make it easy to define conversions for custom classes.</li>
<li>Integrated test harness that will reliably start up and shut down an embedded cassandra instance in your tests.</li>
<li>Pluggable connection pool with reliable connection handling, including retries for downed servers.</li>
<li>JSON based configuration.</li>
</ul><h2>Versioning</h2>

<p>Starting with version 0.6 the minor version number will be pinned to Cassandra's.  Thus making it easy to know
which versions of Cassandra will be compatible with Scromium.</p>

<h2>Which Artifacts Do You Need?</h2>

<p>Scromium has two different artifacts available in the main repository.  The default artifact is simply a jar with the
main scromium code.  Its transitive dependencies are declared in the .pom, however there are a few dependencies that it
relies upon which are not managed by a maven repository.  These unmanaged dependencies have mostly to do with the thrift
interface and running the embedded Cassandra node.</p>

<p>Pulling in the thin Jar:</p>

<pre><code>val scromiumRepo = "Cliff's Scromium Repo" at "http://cliffmoon.github.com/scromium/repository/"
val scromium = "scromium" % "scromium_2.8.0.Beta1" % "0.6.1"
</code></pre>

<p>There is also a fat jar available as scromium-all.  It includes a patched version of cassandra along with its unmanaged
dependencies.</p>

<p>Pulling in the fat Jar:</p>

<pre><code>val scromiumRepo = "Cliff's Scromium Repo" at "http://cliffmoon.github.com/scromium/repository/"
val scromium = "scromium" % "scromium_2.8.0.Beta1" % "0.6.1" artifacts Artifact("scromium-all_2.8.0.Beta1", "all", "jar")
</code></pre>

<h2>Taste The Difference (API Tour)</h2>

<p>The way shit is supposed to work.  We need to first start Scromium, which involves reading in the configuration and spinning
up a connection pool.  Start will take either no arguments, a file, or a Map[String,Any] depending on how you want to
deliver Scromium's configuration.</p>

<pre><code>import scromium._
import scromium.api._
import scromium.serializers.Serializers._

val conf = Map("connectionPool" -&gt; "scromium.connection.CommonsConnectionPool",
    "seedHost" -&gt; "127.0.0.1",
    "seedPort" -&gt; 9160,
    "maxIdle" -&gt; 10,
    "initCapacity" -&gt; 10,
    "clientProvider" -&gt; "scromium.thrift.ThriftClientProvider")
val cassandra = Cassandra.start(conf)
</code></pre>

<p>Most of the API is chainable, except where it either is not possible or does not make sense.  The idea
is to be able to build up queries and inserts naturally.  This piece of code opens up the keyspace "fuck"
for some operations, and passes that keyspace into the resulting block.</p>

<pre><code>cassandra.keyspace("fuck") { ks =&gt;
</code></pre>

<p>Consistency levels can be delivered via implicit parameters.  This saves a lot of typing if you know a
block of code will all be using the same read or write consistency level.</p>

<pre><code>  implicit val consistency = ReadConsistency.One
</code></pre>

<p>The get API is oriented around around either retrieving a single cell or a single supercolumn.  You pass parent objects to sub codeblocks to do stuff.<br>
Pretty self explanatory</p>

<pre><code>cassandra.keyspace("Keyspace") { ks =&gt;

    //Get Methods 
    //for Column
    ks.columnFamily("ColumnFamily") { cf =&gt;           
        val column = cf.getColumn("row1", "c1").get            
    }

    //for SuperColumn
    ks.superColumnFamily("SuperColumnFamily") { cf =&gt;

        val sc = cf.getSuperColumn("row1", "sc1").get

        val c = cf.getSubColumn("row1", "sc1", "c1").get

    }
}
</code></pre>

<p>Range queries are performed via the range and rangeSuper methods of Keyspace.  Range queries require using
the OrderPreservingPartitioner, so they will fail with an incorrectly configured Cassandra node.</p>

<pre><code>    cassandra.keyspace("Keyspace") { ks =&gt;
        ks.superColumnFamily("SuperColumnFamily") { scf =&gt;
            val slice = Slice("fuck", "shit")
            val rows = List("a".getBytes, "b".getBytes, "c".getBytes)
            val selector = new Selector(rows).slice(slice)

            val iterColumns = scf.get(selector)
        }
}
</code></pre>

<p>Inserts and batch inserts are pretty simple as well,</p>

<pre><code>cassandra.keyspace("Keyspace") { ks =&gt;
    ks.columnFamily("ColumnFamily") { cf =&gt;
        cf.batch { put =&gt;
            val r = put.row("row1")
            r.insert("c1", "value")
            //.. add more columns/rows to batch it if you want
            cf.put(put)
        }
    }
}
</code></pre>

<p>Multigets, again really really simple</p>

<pre><code>cassandra.keyspace("Keyspace") { ks =&gt;
    ks.columnFamily("ColumnFamily") { cf =&gt;

        val results = cf.get(cf.selector(List("row1", "row2")).columns(List("c1", "c2", "c3"))).toList
        println("results " + results)

    }
}
</code></pre>

<p>Throughout all of these examples not much attention has been paid to the types of the columns,
supercolumns, and values.  Cassandra deals with these internally as opaque byte arrays.  Scromium
provides a serialization API with a few presets defined.  This serialization API should make
it easy for you to write conversions from your own objects into and back out from byte arrays.</p>

<p>Serializers are provided to the API as implicit parameters.  Scala will automatically choose the
most specific Serializer or Deserializer available at the call site.</p>

<p>You can define your own Serializers.</p>

<pre><code>  implicit object FuckSerializer extends Serializer[Fuck] {
    def serialize(fuck : Fuck) = Array[Byte](0)

    def deserialize(ary : Array[Byte]) = new Fuck
  }
</code></pre>

<p>And that will allow you to give a Fuck and get a Fuck as long as that implicit object is in scope.</p>

<pre><code>cassandra.keyspace("Keyspace") { ks =&gt; {
    ks.columnFamily("ColumnFamily") { cf =&gt;
        cf.batch { put =&gt;
            val r = put.row("row")
            r.insert("c1", new Fuck)                
            cf.put(put)
        }

    val myFuck = cf.getColumn("row", "c1").get.valueAs[Fuck]

    // Simple as Fuck!                  
    }
}
</code></pre>

<h2>Testing Is Hard</h2>

<p>The API of scromium actively resists testing via mocking.  Also I believe mocking in this case is dumb.
When you mock something like a database what are you testing against?  Certainly not the behavior of
the actual database.  You are testing against your assumptions about how the database ought to work.
We are in the JVM.  Why reimplement cassandra using a mocking API?  We should simply lean into it and
embed a Cassandra node in our tests.</p>

<pre><code>import org.specs._
import scromium._
import scromium.serializers.Serializers._

class FuckSpecification extends Specification {

  var cassandra : Cassandra = null

  doBefore { cassandra = Cassandra.startTest }
  doAfter { cassandra.teardownTest }

  "Fuck" should {
    "do some shit" in {
      cassandra.keyspace("fuck_shit") { ks =&gt;
        implicit val w = WriteConsistency.One
        implicit val r = ReadConsistency.Any

        ks.insert("its", "a" -&gt; "stack" -&gt; "of", "fuckshit")
        val result = ks.get("its", "a") % "stack" / "of" !; 
        result.valueAs[String] must be("fuckshit")
      }
    }
  }
}
</code></pre>

<p>That test should green bar.</p>

<p>The one caveat with running Cassandra in this way is that it starts up a shit ton of threads and
once we pull the rug out from under them in the teardown method they will eventually start vomiting
to the console.  They are harmless, mind you, but something to be aware of.  Ghosts of instantiation
past.</p>

<h2>Configuration</h2>

<p>Scromium is configured via a <code>Map[String,Any]</code>.  This configuration can be delivered through a variety
of means.  It can either be passed directly into <code>Cassandra.start(map : Map[String,Any])</code> or it can
be supplied as a JSON file passed in to <code>Cassandra.start(file : String)</code>.</p>

<p>The configuration simply consists of the class name of a ConnectionPool implementation and options
which should be passed in.</p>

<p>The default is the CommonsConnectionPool which uses the Apache Commons stack object pool as its
implementation.  There is also an ActorConnectionPool which wraps each connection in an individual
actor for automatic asynchronous execution.</p></div></div>
  </div>



    </div>
  
      
    </div>

    <div id="footer" class="clearfix">
      <div class="site">
        <div class="sponsor">
          <a href="http://www.rackspace.com" class="logo">
            <img alt="Dedicated Server" src="https://assets3.github.com/images/modules/footer/rackspace_logo.png?v2?52a04f4d5bac1e6525ba43735c8142489bd7a665" />
          </a>
          Powered by the <a href="http://www.rackspace.com ">Dedicated
          Servers</a> and<br/> <a href="http://www.rackspacecloud.com">Cloud
          Computing</a> of Rackspace Hosting<span>&reg;</span>
        </div>

        <ul class="links">
          <li class="blog"><a href="https://github.com/blog">Blog</a></li>
          <li><a href="http://support.github.com">Support</a></li>
          <li><a href="https://github.com/training">Training</a></li>
          <li><a href="http://jobs.github.com">Job Board</a></li>
          <li><a href="http://shop.github.com">Shop</a></li>
          <li><a href="https://github.com/contact">Contact</a></li>
          <li><a href="http://develop.github.com">API</a></li>
          <li><a href="http://status.github.com">Status</a></li>
        </ul>
        <ul class="sosueme">
          <li class="main">&copy; 2010 <span id="_rrt" title="0.05225s from fe2.rs.github.com">GitHub</span> Inc. All rights reserved.</li>
          <li><a href="/site/terms">Terms of Service</a></li>
          <li><a href="/site/privacy">Privacy</a></li>
          <li><a href="https://github.com/security">Security</a></li>
        </ul>
      </div>
    </div><!-- /#footer -->

    
      
      
        <!-- current locale:  -->
        <div class="locales">
          <div class="site">

            <ul class="choices clearfix limited-locales">
              <li><span class="current">English</span></li>
              
                  <li><a rel="nofollow" href="?locale=de">Deutsch</a></li>
              
                  <li><a rel="nofollow" href="?locale=fr">Français</a></li>
              
                  <li><a rel="nofollow" href="?locale=ja">日本語</a></li>
              
                  <li><a rel="nofollow" href="?locale=pt-BR">Português (BR)</a></li>
              
                  <li><a rel="nofollow" href="?locale=ru">Русский</a></li>
              
                  <li><a rel="nofollow" href="?locale=zh">中文</a></li>
              
              <li class="all"><a href="#" class="minibutton btn-forward js-all-locales"><span><span class="icon"></span>See all available languages</span></a></li>
            </ul>

            <div class="all-locales clearfix">
              <h3>Your current locale selection: <strong>English</strong>. Choose another?</h3>
              
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=en">English</a></li>
                  
                      <li><a rel="nofollow" href="?locale=af">Afrikaans</a></li>
                  
                      <li><a rel="nofollow" href="?locale=ca">Català</a></li>
                  
                      <li><a rel="nofollow" href="?locale=cs">Čeština</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=de">Deutsch</a></li>
                  
                      <li><a rel="nofollow" href="?locale=es">Español</a></li>
                  
                      <li><a rel="nofollow" href="?locale=fr">Français</a></li>
                  
                      <li><a rel="nofollow" href="?locale=hr">Hrvatski</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=id">Indonesia</a></li>
                  
                      <li><a rel="nofollow" href="?locale=it">Italiano</a></li>
                  
                      <li><a rel="nofollow" href="?locale=ja">日本語</a></li>
                  
                      <li><a rel="nofollow" href="?locale=nl">Nederlands</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=no">Norsk</a></li>
                  
                      <li><a rel="nofollow" href="?locale=pl">Polski</a></li>
                  
                      <li><a rel="nofollow" href="?locale=pt-BR">Português (BR)</a></li>
                  
                      <li><a rel="nofollow" href="?locale=ru">Русский</a></li>
                  
                </ul>
              
                <ul class="choices">
                  
                      <li><a rel="nofollow" href="?locale=sr">Српски</a></li>
                  
                      <li><a rel="nofollow" href="?locale=sv">Svenska</a></li>
                  
                      <li><a rel="nofollow" href="?locale=zh">中文</a></li>
                  
                </ul>
              
            </div>

          </div>
          <div class="fade"></div>
        </div>
      
    

    <script>window._auth_token = "598b9fa77f363719def7f8d429a3e72543488d77"</script>
    <div id="keyboard_shortcuts_pane" style="display:none">
  <h2>Keyboard Shortcuts</h2>

  <div class="columns threecols">
    <div class="column first">
      <h3>Site wide shortcuts</h3>
      <dl class="keyboard-mappings">
        <dt>s</dt>
        <dd>Focus site search</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>?</dt>
        <dd>Bring up this help dialog</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column middle">
      <h3>Commit list</h3>
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selected down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selected up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>t</dt>
        <dd>Open tree</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>p</dt>
        <dd>Open parent</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>c <em>or</em> o <em>or</em> enter</dt>
        <dd>Open commit</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column last">
      <h3>Pull request list</h3>
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selected down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selected up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>o <em>or</em> enter</dt>
        <dd>Open issue</dd>
      </dl>
    </div><!-- /.columns.last -->
  </div><!-- /.columns.equacols -->

  <div class="rule"></div>

  <h3>Issues</h3>

  <div class="columns threecols">
    <div class="column first">
      <dl class="keyboard-mappings">
        <dt>j</dt>
        <dd>Move selected down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>k</dt>
        <dd>Move selected up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>x</dt>
        <dd>Toggle select target</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>o <em>or</em> enter</dt>
        <dd>Open issue</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column middle">
      <dl class="keyboard-mappings">
        <dt>I</dt>
        <dd>Mark selected as read</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>U</dt>
        <dd>Mark selected as unread</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>e</dt>
        <dd>Close selected</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>y</dt>
        <dd>Remove selected from view</dd>
      </dl>
    </div><!-- /.column.middle -->
    <div class="column last">
      <dl class="keyboard-mappings">
        <dt>c</dt>
        <dd>Create issue</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>l</dt>
        <dd>Create label</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>i</dt>
        <dd>Back to inbox</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>u</dt>
        <dd>Back to issues</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>/</dt>
        <dd>Focus issues search</dd>
      </dl>
    </div>
  </div>

  <div class="rule"></div>

  <h3>Network Graph</h3>
  <div class="columns equacols">
    <div class="column first">
      <dl class="keyboard-mappings">
        <dt>← <em>or</em> h</dt>
        <dd>Scroll left</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>→ <em>or</em> l</dt>
        <dd>Scroll right</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>↑ <em>or</em> k</dt>
        <dd>Scroll up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>↓ <em>or</em> j</dt>
        <dd>Scroll down</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>t</dt>
        <dd>Toggle visibility of head labels</dd>
      </dl>
    </div><!-- /.column.first -->
    <div class="column last">
      <dl class="keyboard-mappings">
        <dt>shift ← <em>or</em> shift h</dt>
        <dd>Scroll all the way left</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>shift → <em>or</em> shift l</dt>
        <dd>Scroll all the way right</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>shift ↑ <em>or</em> shift k</dt>
        <dd>Scroll all the way up</dd>
      </dl>
      <dl class="keyboard-mappings">
        <dt>shift ↓ <em>or</em> shift j</dt>
        <dd>Scroll all the way down</dd>
      </dl>
    </div><!-- /.column.last -->
  </div>

</div>
    

    <!--[if IE 8]>
    <script type="text/javascript" charset="utf-8">
      $(document.body).addClass("ie8")
    </script>
    <![endif]-->

    <!--[if IE 7]>
    <script type="text/javascript" charset="utf-8">
      $(document.body).addClass("ie7")
    </script>
    <![endif]-->

    <script type="text/javascript">
      _kmq.push(['trackClick', 'entice-signup-button', 'Entice banner clicked']);
      
    </script>
    
  </body>
</html>

