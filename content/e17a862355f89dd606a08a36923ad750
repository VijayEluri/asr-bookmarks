<!-- HTH_VERSION_4 -->
<!-- HTH_RAW dGl0bGU6IERpc3RyaWJ1dGluZyBSdWJ5IEFwcGxpY2F0aW9ucyAtIFRoZW9yeSBhbmQgUHJhY3RpY2Ugb2YgQnVpbGRpbmcsIFBhY2tpbmcgYW5kIERpc3RyaWJ1dGluZyBSdWJ5IEFwcGxpY2F0aW9ucw0KDQotDQoNCmg6IERpc3RyaWJ1dGluZyBSdWJ5IEFwcGxpY2F0aW9ucw0KDQpzaDogVGhlb3J5IGFuZCBQcmFjdGljZSBvZiBCdWlsZGluZywgUGFja2luZyBhbmQgRGlzdHJpYnV0aW5nIFJ1YnkgQXBwbGljYXRpb25zDQoNCmRhdGU6IEVyaWsgVmVlbnN0cmEgPGBhIG0gZXJpa3ZlZW5AZGRzLm5sYD4NCg0KLQ0KDQpwZGY6DQoNCnRvYzoNCg0KLQ0KDQpoMTogSW50cm9kdWN0aW9uDQoNClRoaXMgaXMgaG93IEkgYnVpbGQsIHBhY2sgYW5kIGRpc3RyaWJ1dGUgbXkgUnVieSBhcHBsaWNhdGlvbnMuIFRoZW9yeSBhbmQgcHJhY3RpY2UuIFRoZSB1bHRpbWF0ZSBnb2FsIGlzIHRvIGJlIGFibGUgdG8gZGlzdHJpYnV0ZSBqdXN0IG9uZSBleGVjdXRhYmxlIChMaW51eCwgRGFyd2luIG9yIFdpbmRvd3MpIHdoaWNoIGNvbnRhaW5zIGJvdGggdGhlIGFwcGxpY2F0aW9uIGFuZCB0aGUgUnVieSBpbnRlcnByZXRlci4NCg0KVGhlIHRocmVlIG1haW4gc3RlcHMgYXJlOg0KDQpubDogQ3JlYXRlIHRoZSBhcHBsaWNhdGlvbiBpbiBhIGRpcmVjdG9yeSAoYW5kIGl0cyBzdWJkaXJlY3RvcmllcykuDQpubDogQ29udmVydCB0aGlzIGRpcmVjdG9yeSBpbnRvIGFuIFJCQSAoUnVieSBBcmNoaXZlKSB3aXRoIGBhIC4uL3RhcjJydWJ5c2NyaXB0L2luZGV4Lmh0bWwgVGFyMlJ1YnlTY3JpcHRgLg0Kbmw6IENvbnZlcnQgdGhpcyBSQkEgaW50byBhbiBleGVjdXRhYmxlIHdpdGggYGEgLi4vcnVieXNjcmlwdDJleGUvaW5kZXguaHRtbCBSdWJ5U2NyaXB0MkV4ZWAuDQoNCkkgY2FuIGRpc3RyaWJ1dGUgdGhpcyBleGVjdXRhYmxlIHRvIG15IGN1c3RvbWVycyBhcyBhIHN0YW5kYWxvbmUgYXBwbGljYXRpb24uIFRoZXkgZG9uJ3QgbmVlZCBSdWJ5Lg0KDQpjZW50ZXI6IGBpIEN1c3RvbWVycyBkb24ndCBuZWVkIFJ1YnkuYA0KDQpUaGV5IGRvbid0IG5lZWQgUnVieSwgYmVjYXVzZSBpdCdzIGVtYmVkZGVkIGluIHRoZSBleGVjdXRhYmxlLCBhbG9uZyB3aXRoIHRoZSBhcHBsaWNhdGlvbiBmaWxlcyBhbmQgbGlicmFyaWVzIGFuZCBnZW1zLiBFdmVyeXRoaW5nIHRoZXkgbmVlZCB0byBydW4gdGhlIGFwcGxpY2F0aW9uLiBUbyBgYiBydW5gIHRoZSBhcHBsaWNhdGlvbi4gTm90IHRvIGluc3RhbGwgdGhlIGFwcGxpY2F0aW9uLiBUaGlzIGRvY3VtZW50IGRlc2NyaWJlcyBhIHdheSB0byBjcmVhdGUgYW4gYHR0LGIgYXBwbGljYXRpb24uZXhlYC4gTm90IGEgYHR0IHNldHVwLmV4ZWAgb3IgYW4gYHR0IGluc3RhbGwuZXhlYC4NCg0Kbm90ZTogVGhhdCdzIGEgbG90IG9mIGB0dCBleGVgLXMsIGJ1dCBpdCB3b3JrcyBvbiBMaW51eCBhbmQgRGFyd2luLCB0b28uDQoNCmltZzogaW1hZ2VzL2Rpc3RyaWJ1dGluZ3J1YnlhcHBsaWNhdGlvbnMxLmRpYS5naWYgU2NoZW1hdGljIHJlcHJlc2VudGF0aW9uDQoNCi0NCg0KaDE6IENyZWF0ZSB0aGUgQXBwbGljYXRpb24NCg0KQW4gYXBwbGljYXRpb24gaXMgbW9yZSB0aGFuIGp1c3QgYSBwcm9ncmFtIG9yIHNjcmlwdC4gSXQgY29uc2lzdHMgb2YgbGlicmFyaWVzLCBkb2N1bWVudGF0aW9uLCBoZWxwIGZpbGVzLCBjb25maWd1cmF0aW9uIGZpbGVzLCBpbWFnZXMsIGxpY2Vuc2UsIHJlYWRtZSwgYW5kIHNvIG9uLiBCZWNhdXNlIGEgaGFyZCBkaXNrIGlzbid0IG9uZSBiaWcgZGlyZWN0b3J5LCB3ZSB0cmFkaXRpb25hbGx5IGdyb3VwIGZpbGVzIGluIGRpcmVjdG9yaWVzLiBXaGVuIGluc3RhbGxpbmcgYW4gYXBwbGljYXRpb24gb24gYSBoYXJkIGRpc2ssIHdlIGNhbiBkbyB0aGlzIGdyb3VwaW5nIGluIHR3byB3YXlzOg0KDQpsOiBQdXQgYWxsIGZpbGVzIG9mIG9uZSB0eXBlIGluIG9uZSBkaXJlY3RvcnkuIEFsbCBiaW5hcmllcyBpbiBvbmUgcGxhY2UsIGFsbCBoZWxwIGZpbGVzIGluIGFub3RoZXIuIFRoYXQgbWVhbnMgdGhhdCBhbiBhcHBsaWNhdGlvbiBpcyBzY2F0dGVyZWQgYWxsIG92ZXIgdGhlIHBsYWNlLiBUaGF0J3MgdGhlIHdheSBpdCdzIGRvbmUgb24gTGludXggYW5kIG1vc3QgdmVyc2lvbnMgaWYgVW5peC4NCmw6IFB1dCBhbGwgZmlsZXMgdGhhdCBhcmUgcGFydCBvZiBvbmUgYXBwbGljYXRpb24gaW4gaXRzIG93biBkaXJlY3RvcnkgdHJlZS4gQmluYXJpZXMsIGhlbHAgZmlsZXMsIGNvbmZpZ3VyYXRpb24gZmlsZXMsIGV2ZXJ5dGhpbmcgaW4gb25lIHBsYWNlLiBUaGlzIHRpbWUsIGlmIHlvdSB3YW50IHRvIHNlYXJjaCB0aGUgaGVscCBmaWxlcyBmb3IgYSB0ZXJtLCB5b3UgaGF2ZSB0byBmaW5kIHRob3NlIGhlbHAgZmlsZXMgaW4gdGhlIGZpcnN0IHBsYWNlLiBJbiB0aGUgV2luZG93cyB3b3JsZCwgdGhpcyBpcyB0aGUgcHJlZmVycmVkIHdheSBvZiBpbnN0YWxsaW5nIGFwcGxpY2F0aW9ucy4NCg0KV2l0aG91dCBhIGdvb2QsIHVuaWZvcm0gYm9va2tlZXBpbmcgb2YgeW91ciBmaWxlcyAoIldoaWNoIGZpbGVzIGJlbG9uZyB0byB3aGljaCBhcHBsaWNhdGlvbj8iKSwgaXQncyB2aXJ0dWFsbHkgaW1wb3NzaWJsZSB0byB1bmluc3RhbGwgb3IgdXBkYXRlIGFuIGFwcGxpY2F0aW9uLiBUaGUgb25lLWFwcC1vbmUtZGlyIGFwcHJvYWNoIGdpdmVzIHVzIHRoZSBob3VzZWtlZXBpbmcgZm9yIGZyZWUuIEJlY2F1c2UgUnVieSBoYXMgbm8gdW5pZm9ybSB3YXkgb2YgcGFja2luZyBhbmQgZGlzdHJpYnV0aW5nIGFwcGxpY2F0aW9ucywgcHV0dGluZyBhbGwgZmlsZXMgb2Ygb25lIGFwcGxpY2F0aW9uIGluIGl0cyBvd24gZGlyZWN0b3J5IHRyZWUgc2VlbXMgbGlrZSBhIHNhZmUgYmV0Lg0KDQpVc2VyIGRhdGEgaGFzIHRvIGJlIHNlcGFyYXRlZCBmcm9tIHRoZSBhcHBsaWNhdGlvbnMsIHVuZGVyIGFsbCBjaXJjdW1zdGFuY2VzLiBZb3UgZG9uJ3Qgd2FudCB5b3VyIGRhdGEgdG8gYmUgc2NhdHRlcmVkIGFsbCBvdmVyIHRoZSBwbGFjZSENCg0KQmVzaWRlcyB0aGlzIG9uZS1hcHAtb25lLWRpciBhcHByb2FjaCwgdGhlcmUncyBhbHNvIHRoZSBvbmUtYXBwLW9uZS1maWxlIGFwcHJvYWNoLiBMaWtlIGEgWklQLWZpbGUgb3IgVEFSLWJhbGwsIGJ1dCBleGVjdXRhYmxlLiBJdCBsb29rcyBsaWtlIGFuIGlkZWFsIHdheSBvZiBrZWVwaW5nIHJlbGF0ZWQgZmlsZXMgdG9nZXRoZXIuIEknbGwgcmV0dXJuIHRvIHRoaXMgdG9waWMgbGF0ZXIgb24sIGJlY2F1c2UgaXQgdHVybnMgb3V0IHRvIGJlIG5vdCBvbmx5IGEgdGhlb3J5OiBpdCBoYXMgYWxyZWFkeSBiZWVuIGltcGxlbWVudGVkLiBBbnl3YXksIHlvdSBzdGlsbCBuZWVkIHRvIGJ1aWxkIHlvdXIgYXBwbGljYXRpb24gaW4gb25lIGRpcmVjdG9yeSB0cmVlLg0KDQpBIGNvdXBsZSBvZiB0aGluZ3MgeW91IGhhdmUgdG8gdGFrZSBjYXJlIG9mIHdoZW4gY3JlYXRpbmcgdGhlIGFwcGxpY2F0aW9uOg0KDQpsOiBUaGUgZW50cnkgcG9pbnQgb2YgdGhlIGFwcGxpY2F0aW9uIGlzIGB0dCBpbml0LnJiYCAuIEknbGwgZXhwbGFpbiB0aGlzIGluICJgYSAjcGFja2AiLg0KbDogVXNlIG9ubHkgZGlyZWN0b3JpZXMgYW5kIGZpbGVzLiBObyBsaW5rcywgbm8gcGVybWlzc2lvbnMsIG5vIG93bmVycywgbm8gZ3JvdXBzLiBBbGwgdGhpcyBpcyBmb3IgYmVpbmcgcGxhdGZvcm0taW5kZXBlbmRlbnQgYXMgbXVjaCBhcyBwb3NzaWJsZS4NCmw6IERvbid0IHJlbHkgb24gc2hhcmVkIGxpYnJhcmllcyB3aGljaCBhcmUgbm90IHBhcnQgb2YgdGhlIFJ1YnkgZW52aXJvbm1lbnQuIFVubGVzcyB5b3UgYXJlIGFic29sdXRlbHkgc3VyZSB5b3VyIGN1c3RvbWVyIGhhcyBpbnN0YWxsZWQgdGhlc2UgbGlicmFyaWVzLiBGb3IgZXhhbXBsZTogdGhlIFJ1YnkgYmluZGluZ3MgZm9yIFRLIGFyZSBjb25zaWRlcmVkIHRvIGJlIHBhcnQgb2YgeW91ciBSdWJ5IGVudmlyb25tZW50LCBUSyBpdHNlbGYgaXNuJ3QuIEZvciB0aGF0IHJlYXNvbiwgSSBsaWtlIGBhIC4uL3J1Ynl3ZWJkaWFsb2dzL2luZGV4Lmh0bWwgUnVieVdlYkRpYWxvZ3NgIChwdXJlIFJ1YnkhKSBhbmQgYGEgbiBodHRwOi8vd3hydWJ5LnJ1Ynlmb3JnZS5vcmcvd2lraS93aWtpLnBsIFd4UnVieWAgKG5hdGl2ZSB3aWRnZXRzKS4NCg0KLQ0KDQpoMTogI3BhY2sgUGFjayB0aGUgQXBwbGljYXRpb24gKHRoZSBSQkEpDQoNClRoZSBuZXh0IHN0ZXAgaXMgcGFja2luZyBpdCBhbGwgaW50byBvbmUgZmlsZSwgd2hpY2ggd2UgY2FuIG1haWwsIG9yIHNoaXAsIG9yIHB1Ymxpc2ggb24gdGhlICdOZXQsIG9yIGRpc3RyaWJ1dGUgdG8gYWxsIHRoZSB3b3Jrc3RhdGlvbnMuIFRyYWRpdGlvbmFsbHksIHdlIHB1dCB0aGVtIGluIGEgWklQLWZpbGUgb3IgYSBUQVItYmFsbCwgd2hpY2ggaGFzIHRvIGJlIGV4dHJhY3RlZCBtYW51YWxseSBieSB0aGUgY3VzdG9tZXIuIE5vdCBhbGwgY3VzdG9tZXJzIGtub3cgb3Igd2FudCB0byBrbm93IGhvdyB0byBkbyB0aGF0LiBUaGV5IG9ubHkgd2FudCB0byBydW4gdGhlIGFwcGxpY2F0aW9uLiBUaGUgZ29hbCBvZiBtb3N0IHNvZnR3YXJlIGNvbXBhbmllcyBpcyB0byByZWFjaCBhcyBtdWNoIHBlb3BsZSBhcyBwb3NzaWJsZTogIk1vcmUgcGVvcGxlIiBtZWFucyAibW9yZSBtb25leSIuIFNvIHRoZXkgbWFrZSBzb2Z0d2FyZSBmb3Igc3R1cGlkIGN1c3RvbWVycyBhbmQgZ2V0IHJpY2guIChJdCB3b3JrZWQgZm9yIE1pY3Jvc29mdC4uLikgQW5kIG9wZW4gc291cmNlIGRldmVsb3BlcnMgd2FudCB0byBtYWtlIG1vcmUgcGVvcGxlIGhhcHB5LiBUbyBhY2hpZXZlIHRoaXMsIHdlJ3ZlIGNyZWF0ZWQgaW5zdGFsbGVycywgZS5nLiBOU0lTLg0KDQpJIHdhbnQgdG8gZ28gYmFjayBvbmUgc3RlcCBhbmQgYXNrIHRoaXMgcXVlc3Rpb246IERvIHdlIHJlYWxseSBuZWVkIHRvIGluc3RhbGwgYW4gYXBwbGljYXRpb24gYmVmb3JlIHdlIGNhbiB1c2UgaXQ/IFdlIGNhbiByZXdyaXRlIHRoaXMgcXVlc3Rpb246IFdoeSBkbyB3ZSBpbnN0YWxsIGFuIGFwcGxpY2F0aW9uLCBhbnl3YXk/IE1vc3RseSwgYmVjYXVzZSB3ZSBoYXZlIHRvIHJlY3JlYXRlIHRoZSBlbnZpcm9ubWVudCBpbiB3aGljaCB0aGUgYXBwbGljYXRpb24gaGFzIHRvIGxpdmUuIFdlIHNob3VsZG4ndCBib3RoZXIgb3VyIGN1c3RvbWVyIHdpdGggcmVjcmVhdGluZyB0aGlzIGVudmlyb25tZW50LiBIZSBqdXN0IHdhbnRzIHRvIGRvdWJsZSBjbGljayBvbiBhbiBpY29uLiBUaGF0J3Mgd2hhdCBoZSB1bmRlcnN0YW5kczogIlRvIHN0YXJ0IGFuIGFwcGxpY2F0aW9uLCB5b3UgaGF2ZSB0byBkb3VibGUgY2xpY2sgb24gdGhlIGljb24uIiBJZiB3ZSBtYW5hZ2UgdG8gZ2V0IG91ciBzb2Z0d2FyZSBkb3duIHRvIHRoaXMgbGV2ZWwsIHdlIGNhbiByZWFjaCBldmVuIG1vcmUgcGVvcGxlLiBNb3JlIHBlb3BsZSBiZWluZyBoYXBweSwgbW9yZSBtb25leS4NCg0KSkFSJ3MgKEphdmEgQXJjaGl2ZXMpIGFyZSBhIGNvbW1vbiB3YXkgaW4gdGhlIEphdmEgdW5pdmVyc2UgdG8gcGFja2FnZSBhcHBsaWNhdGlvbnMsIG9yIGxpYnJhcmllcywgb3IgYXBwbGV0cy4gSXQncyBvbmUgZmlsZSwgeW91IGNhbiBsYXVuY2ggaXQgYnkgZG91YmxlIGNsaWNraW5nLCBpdCdzIHNlYWxlZCwgaXQncyBzaW1wbGUuIEl0J3MgZ29vZC4gQ2FuIHdlIGRvIHRoaXMgd2l0aCBSdWJ5PyBZZXMsIHdlIGNhbi4gRG8gd2UgaGF2ZSB0byBjaGFuZ2UgdGhlIHJ1bnRpbWUgZW52aXJvbm1lbnQ/IE5vLCB3ZSBkb24ndC4gQnV0IEphdmEga25vd3MgaG93IHRvIGhhbmRsZSBKQVIncyBhbmQgUnVieSBkb2Vzbid0IGtub3cgaG93IHRvIGhhbmRsZSBSQkEncyAoUnVieSBBcmNoaXZlcyk6IFdlIG5lZWQgZXh0cmEgdG9vbHMhIE5vIHdlIGRvbid0LiBBbmQgeWVzLCBpdCBhbHJlYWR5IGV4aXN0cy4gSXQncyBjYWxsZWQgYGEgLi4vdGFyMnJ1YnlzY3JpcHQvaW5kZXguaHRtbCBUYXIyUnVieVNjcmlwdGAuDQoNCmBhIC4uL3RhcjJydWJ5c2NyaXB0L2luZGV4Lmh0bWwgVGFyMlJ1YnlTY3JpcHRgIHRyYW5zZm9ybXMgYSBkaXJlY3RvcnkgdHJlZSwgY29udGFpbmluZyB5b3VyIGFwcGxpY2F0aW9uLCBpbnRvIG9uZSBzaW5nbGUgUnVieSBzY3JpcHQsIGNhbGxlZCB0aGUgUkJBIChSdWJ5IEFyY2hpdmUpLCBhbG9uZyB3aXRoIHNvbWUgY29kZSB0byBoYW5kbGUgdGhpcyBhcmNoaXZlIGFuZCBzdGFydCB0aGUgYXBwbGljYXRpb24uIFRoaXMgUkJBIGNhbiBiZSBkaXN0cmlidXRlZCB0byBvdXIgZnJpZW5kcy4gV2hlbiB0aGV5J3ZlIGluc3RhbGxlZCBSdWJ5LCB0aGV5IGp1c3QgZG91YmxlIGNsaWNrLCBhbmQgeW91ciBhcHBsaWNhdGlvbiBpcyB1cCBhbmQgcnVubmluZyEgU2VlIHRoZSBleGFtcGxlcyBzZWN0aW9uIG9mIGBhIC4uL3J1Ynl3ZWJkaWFsb2dzL2luZGV4Lmh0bWwgUnVieVdlYkRpYWxvZ3NgIGZvciBzb21lIGRlbW9zLg0KDQpUbyBjcmVhdGUgdGhlIFJCQToNCg0KICQgcnVieSBgYSBkIC4uL3RhcjJydWJ5c2NyaXB0L2Rvd25sb2FkL3RhcjJydWJ5c2NyaXB0LnJiIHRhcjJydWJ5c2NyaXB0LnJiYCBgaSBhcHBsaWNhdGlvbmAvDQoNClRoZSByZXN1bHQsIGB0dCxpIGFwcGxpY2F0aW9uYGB0dCAucmJgLCBgYiBpc2AgdGhlIGFwcGxpY2F0aW9uIGFuZCBjYW4gcnVuIGxpa2UgYW55IHNjcmlwdDoNCg0KICQgcnVieSBgaSBhcHBsaWNhdGlvbmAucmINCg0KYGEgLi4vdGFyMnJ1YnlzY3JpcHQvaW5kZXguaHRtbCBUYXIyUnVieVNjcmlwdGAga25vd3MgaG93IHRvIGhhbmRsZSB0aGUgZW1iZWRkZWQgYXJjaGl2ZSBhbmQgaXMgYWJsZSB0byBleHRyYWN0IGl0IHRvIGEgdGVtcG9yYXJ5IGRpcmVjdG9yeS4gQWZ0ZXIgdGhhdCwgaXQgc2ltcGx5IGxvYWRzIGB0dCBpbml0LnJiYCwgaWYgcHJlc2VudCwgaW4gdGhlIG5ld2x5IGNyZWF0ZWQgZGlyZWN0b3J5LiBUaGlzIGB0dCBpbml0LnJiYCBpcyBvdXIgZW50cnkgcG9pbnQuDQoNCi0NCg0KaDE6IERpc3RyaWJ1dGUgdGhlIEFwcGxpY2F0aW9uICh0aGUgRXhlY3V0YWJsZSkNCg0KVW50aWwgbm93LCB3ZSBhc3N1bWVkIHRoYXQgb3VyIGN1c3RvbWVyIGhhcyBpbnN0YWxsZWQgUnVieS4gRXZlbiB3b3JzZTogd2UgYXNzdW1lZCB0aGF0IGhlIGhhcyBpbnN0YWxsZWQgdGhlIHNhbWUgbGlicmFyaWVzIGFzIHdlIGhhdmUuIEFuZCB0aGUgc2FtZSBnZW1zLiBBbmQgdGhhdCBoZSBoYXMgdGhlIHNhbWUgdmVyc2lvbnMsIG9yIGF0IGxlYXN0IGNvbXBhdGlibGUgdmVyc2lvbnMuIFdlbGwsIHRoYXQncyBhIGxvdCBvZiBhc3N1bXB0aW9ucy4gVW53ZWxjb21lIGFzc3VtcHRpb25zLiBJdCB3b3VsZCBiZSBuaWNlIGlmIHdlIGNvdWxkIGFzc3VtZSB0aGF0IHRoZSBjdXN0b21lcnMgaGFzbid0IGluc3RhbGxlZCBSdWJ5IGF0IGFsbC4gVGhhdCdzIHdoZXJlIGBhIC4uL3J1YnlzY3JpcHQyZXhlL2luZGV4Lmh0bWwgUnVieVNjcmlwdDJFeGVgIGNvbWVzIGluLg0KDQpgYSAuLi9ydWJ5c2NyaXB0MmV4ZS9pbmRleC5odG1sIFJ1YnlTY3JpcHQyRXhlYCB0cmFuc2Zvcm1zIHRoZSBSQkEgKHdlbGwsIGFueSBSdWJ5IHNjcmlwdC4uLikgaW50byBhIHN0YW5kYWxvbmUgV2luZG93cywgTGludXggb3IgRGFyd2luIGV4ZWN1dGFibGUuIFlvdSBjYW4gbG9vayBhdCBpdCBhcyBhICJjb21waWxlciIuIE5vdCBpbiB0aGUgc2Vuc2Ugb2YgYSBzb3VyY2UtY29kZS10by1ieXRlLWNvZGUgY29tcGlsZXIsIGJ1dCBhcyBhICJjb2xsZWN0b3IiLCBmb3IgaXQgY29sbGVjdHMgYWxsIG5lY2Vzc2FyeSBmaWxlcyB0byBydW4gdGhlIGFwcGxpY2F0aW9uIG9uIGFuIG90aGVyIG1hY2hpbmU6IHRoZSBSQkEsIHRoZSBSdWJ5IGludGVycHJldGVyIGFuZCB0aGUgUnVieSBydW50aW1lIGxpYnJhcnkgKHN0cmlwcGVkIGRvd24gZm9yIHRoaXMgYXBwbGljYXRpb24pLiBBbnl3YXksIHRoZSByZXN1bHQgaXMgdGhlIHNhbWU6IGEgc3RhbmRhbG9uZSBleGVjdXRhYmxlIChgdHQsaSBhcHBsaWNhdGlvbmBgdHQgLmV4ZWApLiBBbmQgdGhhdCdzIHdoYXQgd2Ugd2FudCENCg0KVG8gY3JlYXRlIHRoZSBleGVjdXRhYmxlOg0KDQogJCBydWJ5IGBhIGQgLi4vcnVieXNjcmlwdDJleGUvZG93bmxvYWQvcnVieXNjcmlwdDJleGUucmIgcnVieXNjcmlwdDJleGUucmJgIGBpIGFwcGxpY2F0aW9uYC5yYg0KDQpZb3UgY2FuIGNvcHkgdGhlIHJlc3VsdCAoYHR0LGkgYXBwbGljYXRpb25gYHR0IC5leGVgIG9uIFdpbmRvd3MsIGB0dCxpIGFwcGxpY2F0aW9uYGB0dCBfbGludXhgIG9uIExpbnV4IGFuZCBgdHQsaSBhcHBsaWNhdGlvbmBgdHQgX2RhcndpbmAgb24gRGFyd2luKSB0byBhbm90aGVyIG1hY2hpbmUgYW5kIHJ1biB0aGUgYXBwbGljYXRpb24hIEV2ZW4gb24gYSBtYWNoaW5lIHdpdGhvdXQgUnVieS4NCg0KVG8gbGlzdCB0aGUgY29udGVudHMgb2YgdGhlIGV4ZWN1dGFibGUgYW5kIHRoZSBjb250ZW50cyBvZiB0aGUgUkJBOg0KDQogJCAuL2BpIGFwcGxpY2F0aW9uYF9saW51eCAtLWVlZS1saXN0DQogJCAuL2BpIGFwcGxpY2F0aW9uYF9saW51eCAtLXRhcjJydWJ5c2NyaXB0LWxpc3QNCg0KT24gV2luZG93cywgaXQnczoNCg0KIGM6XGhvbWVcZXJpaz4gYGkgYXBwbGljYXRpb25gLmV4ZSAtLWVlZS1saXN0DQogYzpcaG9tZVxlcmlrPiBgaSBhcHBsaWNhdGlvbmAuZXhlIC0tdGFyMnJ1YnlzY3JpcHQtbGlzdA0KDQotDQoNCmgxOiBTdW1tYXJ5DQoNClRvIGNyZWF0ZSB0aGUgUkJBIGFuZCB0aGUgZXhlY3V0YWJsZToNCg0KICQgcnVieSBgYSBkIC4uL3RhcjJydWJ5c2NyaXB0L2Rvd25sb2FkL3RhcjJydWJ5c2NyaXB0LnJiIHRhcjJydWJ5c2NyaXB0LnJiYCBgaSBhcHBsaWNhdGlvbmAvDQogJCBydWJ5IGBhIGQgLi4vcnVieXNjcmlwdDJleGUvZG93bmxvYWQvcnVieXNjcmlwdDJleGUucmIgcnVieXNjcmlwdDJleGUucmJgIGBpIGFwcGxpY2F0aW9uYC5yYg0KDQpUbyBsaXN0IHRoZSBjb250ZW50cyBvZiB0aGUgZXhlY3V0YWJsZSBhbmQgdGhlIGNvbnRlbnRzIG9mIHRoZSBSQkE6DQoNCiAkIC4vYGkgYXBwbGljYXRpb25gX2xpbnV4IC0tZWVlLWxpc3QNCiAkIC4vYGkgYXBwbGljYXRpb25gX2xpbnV4IC0tdGFyMnJ1YnlzY3JpcHQtbGlzdA0KDQpIYXZlIGEgbG9vayBhdCB0aGUgc2l0ZXMgb2YgYGEgLi4vdGFyMnJ1YnlzY3JpcHQvaW5kZXguaHRtbCBUYXIyUnVieVNjcmlwdGAgYW5kIGBhIC4uL3J1YnlzY3JpcHQyZXhlL2luZGV4Lmh0bWwgUnVieVNjcmlwdDJFeGVgIGZvciB0aGUgdXNhZ2UgYW5kIG90aGVyIGRldGFpbGVkIGluZm9ybWF0aW9uIG9mIGJvdGggcHJvZHVjdHMuDQoNCi0NCg0KaDE6IFR1dG9yaWFscw0KDQpGb3Igbm93LCBJJ20gd29ya2luZyBvbiBvbmx5IG9uZSB0dXRvcmlhbDogYGEgcmFpbHMuaHRtbCBEaXN0cmlidXRpbmcgUmFpbHMgQXBwbGljYXRpb25zYC4NCg0KLQ0KDQpoMTogRnV0dXJlDQoNClRoZXNlIHNlY3Rpb25zIGFyZSBqdXN0IHRoZW9yaWVzLiBUaGV5IGFyZSBub3Qgbm90ICh5ZXQpIChmdWxseSkgaW1wbGVtZW50ZWQgYW5kIHByb2JhYmx5IG5ldmVyIHdpbGwgYmUuIElmIHlvdSdyZSBzYXRpc2ZpZWQgd2l0aCB0aGUgcHJldmlvdXMgc2VjdGlvbnMgYW5kIHRoZSBleGVjdXRhYmxlLCB5b3UgY2FuIHN0b3AgcmVhZGluZy4uLg0KDQpoMjogT25lIFN0ZXANCg0KSSdtIGNvbnRlbXBsYXRpbmcgdGhlIGNvbWJpbmF0aW9uIGBhIC4uL3RhcjJydWJ5c2NyaXB0L2luZGV4Lmh0bWwgVGFyMlJ1YnlTY3JpcHRgIGFuZCBgYSAuLi9ydWJ5c2NyaXB0MmV4ZS9pbmRleC5odG1sIFJ1YnlTY3JpcHQyRXhlYCBpbiBqdXN0IG9uZSBzdGVwOg0KDQogJCBydWJ5IHJ1YnlzY3JpcHQyZXhlLnJiIGBpIGFwcGxpY2F0aW9uYC8NCg0KYGEgLi4vcnVieXNjcmlwdDJleGUvaW5kZXguaHRtbCBSdWJ5U2NyaXB0MkV4ZWAgYWxyZWFkeSBrbm93cyBob3cgdG8gZW1iZWQgZmlsZXMgYW5kIGRpcmVjdG9yaWVzLiBTdGFydGluZyBgdHQgcnVieSBpbml0LnJiYCBpbiB0aGUgZ2l2ZW4gZGlyZWN0b3J5IGNhbid0IGJlIHRvbyBkaWZmaWN1bHQuLi4NCg0KaDI6IEVucmljaGluZyB0aGUgUkJBDQoNCldlJ3ZlIGNyZWF0ZWQgYW4gUkJBIGFuZCBhbiBleGVjdXRhYmxlLiBUaGUgUkJBIGNvbnRhaW5zIHRoZSBhcHBsaWNhdGlvbiBhbmQgdGhlIGV4ZWN1dGFibGUgY29udGFpbnMgdGhlIFJCQSBhbmQgZXZlcnl0aGluZyBlbHNlIHRvIHJ1biB0aGUgYXBwbGljYXRpb24uDQoNClRoZXJlJ3Mgc29tZXRoaW5nIHdyb25nIHdpdGggdGhpcyBwaWN0dXJlLiBXZSBjYW4ndCBzaGlwIHRoZSBSQkEgaW5zdGVhZCBvZiB0aGUgZXhlY3V0YWJsZSwgdW5sZXNzIG91ciBjdXN0b21lciBoYXMgaW5zdGFsbGVkIHRoZSBzYW1lIGxpYnJhcmllcyBhbmQgZ2VtcyBhcyB3ZSBoYXZlLiBBdCBsZWFzdCB0aGUgb25lcyByZXF1aXJlZCBvciBsb2FkZWQgYnkgb3VyIGFwcGxpY2F0aW9uLiBBbmQgaXQgd291bGQgYmUgbmljZSBpZiB0aGUgdmVyc2lvbnMgd2VyZSB0aGUgc2FtZSBhcyB3ZWxsLiBDYW4ndCB3ZSBqdXN0IHNoaXAgb3VyIGxpYnJhcmllcyBhbmQgZ2VtcyBhbG9uZyB3aXRoIG91ciBhcHBsaWNhdGlvbiB0byBhdm9pZCB0aGVzZSBkZXBlbmRlbmNpZXM/IENhbid0IHdlIGp1c3QgY29weSB0aGUgbmVjZXNzYXJ5IGZpbGVzIGZyb20gYHR0IHNpdGVsaWJkaXJgIGFuZCBgdHQgZ2VtZGlyYCBpbnRvIHRoZSBSQkE/DQoNClllcyB3ZSBjYW4sIGlmIGBhIC4uL3RhcjJydWJ5c2NyaXB0L2luZGV4Lmh0bWwgVGFyMlJ1YnlTY3JpcHRgIGlzIGFibGUgdG8gZGV0ZWN0IGFuZCBlbWJlZCBhbGwgbmVjZXNzYXJ5IGB0dCBzaXRlbGliZGlyYC1maWxlcyBhbmQgYHR0IHJ1YnlnZW1gLWZpbGVzIChhbmQgdGhlaXIgYHR0IGRsbGAncyBhbmQgYHR0IHNvYCdzLCBkZXRlcm1pbmVkIHJlY3Vyc2l2ZWx5KSBhbmQgaWYgYGEgLi4vcnVieXNjcmlwdDJleGUvaW5kZXguaHRtbCBSdWJ5U2NyaXB0MkV4ZWAgaXMgYWJsZSB0byBkZXRlY3QgYW5kIGVtYmVkIGFsbCBuZWNlc3NhcnkgZmlsZXMgZXhjZXB0IHRoZSBgdHQgc2l0ZWxpYmRpcmAtZmlsZXMgYW5kIGB0dCBydWJ5Z2VtYC1maWxlcy4gQ29tYmluaW5nIHRoZXNlIGZlYXR1cmVzIHJlc3VsdHMgaW4gYW4gZW5yaWNoZWQgUkJBIGFuZCB0aGUgc2FtZSBleGVjdXRhYmxlLiBUaGUgUkJBIGNhbiBydW4gb24gYSBwbGFpbiBSdWJ5IGluc3RhbGxhdGlvbiBhbmQgdGhlIGV4ZWN1dGFibGUgY2FuIHJ1biBvbiBhbnkgbWFjaGluZSAod2l0aCB0aGUgY29ycmVzcG9uZGluZyBPUykuDQoNCkluIGFuIGlkZWFsIHdvcmxkLCB0aGlzIFJCQSBjb250YWlucyBqdXN0IFJ1YnkgZmlsZXMgYW5kIG5vIGB0dCBzb2AtZmlsZXMsIHNvIHRoZSBhcHBsaWNhdGlvbiBpcyBwbGF0Zm9ybSBhZ25vc3RpYywgbGlrZSBSdWJ5IGl0c2VsZi4gRm9yIGV4YW1wbGUsIHRoZSBleGFtcGxlcyBvZiBgYSAuLi9ydWJ5d2ViZGlhbG9ncy9pbmRleC5odG1sIFJ1YnlXZWJEaWFsb2dzYCBhcmUgcGVyZmVjdGx5IGVucmljaGVkIFJCQSdzLg0KDQpBdCB0aGUgdGltZSBvZiB3cml0aW5nLCBgYSAuLi90YXIycnVieXNjcmlwdC9pbmRleC5odG1sIFRhcjJSdWJ5U2NyaXB0YCBhbmQgYGEgLi4vcnVieXNjcmlwdDJleGUvaW5kZXguaHRtbCBSdWJ5U2NyaXB0MkV4ZWAgYXJlIG5vdCBhYmxlIHRvIGRvIHRoaXMgb3B0aW1pemF0aW9uLg0KDQpUaGUgZm9sbG93aW5nIHR3byBpbWFnZXMgc2hvdyB0aGUgZGlmZmVyZW5jZXMuDQoNCmVvcDoNCg0KaW1nOiBpbWFnZXMvZGlzdHJpYnV0aW5ncnVieWFwcGxpY2F0aW9uczIuZGlhLmdpZiBObyBlbnJpY2hlZCBSQkENCg0KaW1nOiBpbWFnZXMvZGlzdHJpYnV0aW5ncnVieWFwcGxpY2F0aW9uczMuZGlhLmdpZiBFbnJpY2hlZCBSQkENCg0KZW9wOg0KDQotDQoNCnJzczogLi4vaW5kZXgucnNzDQoNCm5lZHN0YXQ6IEFETGpkQUNpWHJQZ3E5Vlg3UWVGcXF0WXJWRmcNCg0Ka3c6IGFpb3IgYWxsIGFsbGlub25lIGFsbGlub25lcnVieSBhcHBsaWNhdGlvbnMgYXJjaGl2ZSBiaW4gYnJvd3NlciBjb2RlIGNvZGVzbmlwcGV0IGNvZGVzbmlwcGV0cyBjb21waWxlIGNvbXBpbGVyIGNvbXB1dGVyIGNvbXB1dGVybGFuZ3VhZ2UgZGlhbG9nIGRpYWxvZ3MgZGlzdHJpYnV0ZSBkaXN0cmlidXRpbmcgZGlzdHJpYnV0aW5ncnVieWFwcGxpY2F0aW9ucyBkaXN0cmlidXRpb24gZWVlIGVlZS1maWxlIGVlZWZpbGUgZXJpayBlcmlrdmVlbiBlcmlrdmVlbnN0cmEgZXhlIGV4ZWN1dGFibGUgZXhlcmIgZmlsZSBncmFwaGljYWwgZ3JhcGhpY2FsdXNlcmludGVyZmFjZSBndWkgZ3ogaHRtbCBodHRwIGh0dHBzZXJ2ZXIgaWxvdmVydWJ5IGludGVyZmFjZSBqYXIgaml0IGp1c3QganVzdGludGltZSBsYW5nIGxhbmd1YWdlIG9uZSBwYWNrIHBhY2thZ2UgcGFja2FnaW5nIHBhY2tpbmcgcGFja2luZ3J1YnlhcHBsaWNhdGlvbnMgcHJvZ3JhbW1pbmcgcHJvZ3JhbW1pbmdsYW5ndWFnZSByYXIgcmIgcmIyYmluIHJiMmV4ZSByYmEgcmJhcmNoaXZlIHJidG9iaW4gcmJ0b2V4ZSByYncgcnVieSBydWJ5MmJpbiBydWJ5MmV4ZSBydWJ5YXBwbGljYXRpb25zIHJ1YnlhcmNoaXZlIHJ1Ynljb21waWxlciBydWJ5c2NyaXB0IHJ1YnlzY3JpcHQyIHJ1YnlzY3JpcHQyZXhlIHJ1YnlzY3JpcHRzIHJ1YnlzY3JpcHR0b2V4ZSBydWJ5dG9iaW4gcnVieXRvZXhlIHJ1Ynl3ZWIgcnVieXdlYmRpYWxvZyBydWJ5d2ViZGlhbG9ncyBzY3JpcHQgc2NyaXB0cyBzZXJ2ZXIgc25pcHBldCBzbmlwcGV0cyB0MnJiIHQycnMgdGFyIHRhcjJyYiB0YXIycmJzY3JpcHQgdGFyMnJzIHRhcjJyc2NyaXB0IHRpbWUgdWkgdXNlciB1c2VyaW50ZXJmYWNlIHZlZW5zdHJhIHdlYiB3ZWJicm93c2VyIHdlYmRpYWxvZyB3ZWJkaWFsb2dzIHdpbmRvdyB3aW5kb3dpbmJyb3dzZXIgd2luZG93cyB3cmFwIHdyYXBwZXIgd3hydWJ5IHppcA0K -->
<html>
<head>
 <title>Distributing Ruby Applications - Theory and Practice of Building, Packing and Distributing Ruby Applications</title>
 <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
 <meta http-equiv='Content-Style-Type' content='text/css'>
  <style type='text/css'>
  <!--

             /* body                  { background            : white     } */

             /* body                  { margin-top            : 50px      } */
             /* body                  { margin-bottom         : 50px      } */
             /* body                  { margin-left           : 100px     } */
             /* body                  { margin-right          : 100px     } */

             body                     { background            : gray      }

             body                     { margin-top            : 0px       }
             body                     { margin-bottom         : 0px       }
             body                     { margin-left           : 0px       }
             body                     { margin-right          : 0px       }

             div.main                 { background            : white     }

             div.main                 { margin-top            : 25px      }
             div.main                 { margin-bottom         : 25px      }
             div.main                 { margin-left           : 25px      }
             div.main                 { margin-right          : 25px      }

             div.main                 { border-style          : solid     }
             div.main                 { border-color          : black     }
             div.main                 { border-top-width      : 1px       }
             div.main                 { border-bottom-width   : 4px       }
             div.main                 { border-left-width     : 1px       }
             div.main                 { border-right-width    : 4px       }

             div.main                 { padding-top           : 50px      }
             div.main                 { padding-bottom        : 50px      }
             div.main                 { padding-left          : 100px     }
             div.main                 { padding-right         : 100px     }

             a                        { text-decoration       : none      }
             a                        { color                 : #CC0000   }
             a:hover                  { background            : #CCCCCC   }

             a.nohover:hover          { background            : white     }

             a.rss                    { background            : #FF6600   }
             a.rss                    { color                 : #FFFFFF   }
             a.rss                    { font-size             : small     }
             a.rss                    { font-style            : bold      }

             pre                      { background            : #EEEEEE   }

             /* pre                   { margin-left           : 25px      } */
             /* pre                   { margin-right          : 25px      } */

             img                      { background            : white     }
             img:hover                { background            : white     }

             h1                       { font-size             : large     }
             h2                       { font-size             : medium    }
             h3                       { font-size             : small     }

             h1                       { color                 : #CC0000   }
             h2                       { color                 : #CC0000   }
             h3                       { color                 : #CC0000   }

             h1                       { font-style            : normal    }
             h2                       { font-style            : normal    }
             h3                       { font-style            : italic    }

             h1.no-toc                { font-size             : xx-large  }
             h2.no-toc                { font-size             : x-large   }
             h3.no-toc                { font-size             : large     }

             /* tt:hover              { background            : #EEEEEE   } */

  //-->
  </style>
</head>
<body link='#CC0000' vlink='#CC0000' alink='#CC0000'>
<div class='main'>
<a name='top'></a>

<!-- HTH_HR -->
<hr>

<!-- HTH_H -->
<h1 class='no-toc' align='center' title='Title'>Distributing Ruby Applications</h1>

<!-- HTH_SH -->
<h2 class='no-toc' align='center' title='Subtitle'>Theory and Practice of Building, Packing and Distributing Ruby Applications</h2>

<!-- HTH_DATE -->
<p align='center'><span title='Last modified'>Fri May 25 15:05:33 UTC 2007</span><br><span title='Author'>Erik Veenstra &lt;<a href='mailto:erikveen@dds.nl' title='Mail: erikveen@dds.nl'>erikveen@dds.nl</a>&gt;</span></p>

<!-- HTH_HR -->
<hr>

<!-- HTH_PDF -->
<p align='center'><small><i><a href='index.html.pdf' target='_blank' type='application/pdf' title='Printable version'>PDF version (A4)</a></i></small></p>

<!-- HTH_TOC -->
<p>
<a name='toc_1.0.0'></a><a href='#1.0.0' title='Go to this section'>1. Introduction</a><br>
<br><a name='toc_2.0.0'></a><a href='#2.0.0' title='Go to this section'>2. Create the Application</a><br>
<br><a name='toc_3.0.0'></a><a href='#3.0.0' title='Go to this section'>3. Pack the Application (the RBA)</a><br>
<br><a name='toc_4.0.0'></a><a href='#4.0.0' title='Go to this section'>4. Distribute the Application (the Executable)</a><br>
<br><a name='toc_5.0.0'></a><a href='#5.0.0' title='Go to this section'>5. Summary</a><br>
<br><a name='toc_6.0.0'></a><a href='#6.0.0' title='Go to this section'>6. Tutorials</a><br>
<br><a name='toc_7.0.0'></a><a href='#7.0.0' title='Go to this section'>7. Future</a><br>
<small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='toc_7.1.0'></a><a href='#7.1.0' title='Go to this section'>7.1. One Step</a></small><br>
<small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name='toc_7.2.0'></a><a href='#7.2.0' title='Go to this section'>7.2. Enriching the RBA</a></small><br>
</p>

<!-- HTH_HR -->
<hr>

<!-- HTH_HEADER -->
<h1><a name='1.0.0'></a><a name='1.0.0'></a><a href='#1.0.0' title='Link to this section'>1. Introduction</a></h1>

<!-- HTH_TEXT -->
<p>This is how I build, pack and distribute my Ruby applications. Theory and practice. The ultimate goal is to be able to distribute just one executable (Linux, Darwin or Windows) which contains both the application and the Ruby interpreter.</p>

<!-- HTH_TEXT -->
<p>The three main steps are:</p>

<!-- HTH_NL -->
<ol>
<li>Create the application in a directory (and its subdirectories).</li>
<li>Convert this directory into an RBA (Ruby Archive) with <a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a>.</li>
<li>Convert this RBA into an executable with <a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a>.</li>
</ol>

<!-- HTH_TEXT -->
<p>I can distribute this executable to my customers as a standalone application. They don&#39;t need Ruby.</p>

<!-- HTH_CENTER -->
<p align='center'><i>Customers don&#39;t need Ruby.</i></p>

<!-- HTH_TEXT -->
<p>They don&#39;t need Ruby, because it&#39;s embedded in the executable, along with the application files and libraries and gems. Everything they need to run the application. To <b>run</b> the application. Not to install the application. This document describes a way to create an <tt><b>application.exe</b></tt>. Not a <tt>setup.exe</tt> or an <tt>install.exe</tt>.</p>

<!-- HTH_NOTE -->
<p><small><i>(That&#39;s a lot of <tt>exe</tt>-s, but it works on Linux and Darwin, too.)</i></small></p>

<!-- HTH_IMG -->
<p align='center'><img src='images/distributingrubyapplications1.dia.gif' alt='[images/distributingrubyapplications1.dia.gif]' title='Schematic representation' border='0'></p>

<!-- HTH_HR -->
<hr>

<!-- HTH_HEADER -->
<h1><a name='2.0.0'></a><a name='2.0.0'></a><a href='#2.0.0' title='Link to this section'>2. Create the Application</a></h1>

<!-- HTH_TEXT -->
<p>An application is more than just a program or script. It consists of libraries, documentation, help files, configuration files, images, license, readme, and so on. Because a hard disk isn&#39;t one big directory, we traditionally group files in directories. When installing an application on a hard disk, we can do this grouping in two ways:</p>

<!-- HTH_L -->
<ul>
<li>Put all files of one type in one directory. All binaries in one place, all help files in another. That means that an application is scattered all over the place. That&#39;s the way it&#39;s done on Linux and most versions if Unix.</li>
<li>Put all files that are part of one application in its own directory tree. Binaries, help files, configuration files, everything in one place. This time, if you want to search the help files for a term, you have to find those help files in the first place. In the Windows world, this is the preferred way of installing applications.</li>
</ul>

<!-- HTH_TEXT -->
<p>Without a good, uniform bookkeeping of your files (&quot;Which files belong to which application?&quot;), it&#39;s virtually impossible to uninstall or update an application. The one-app-one-dir approach gives us the housekeeping for free. Because Ruby has no uniform way of packing and distributing applications, putting all files of one application in its own directory tree seems like a safe bet.</p>

<!-- HTH_TEXT -->
<p>User data has to be separated from the applications, under all circumstances. You don&#39;t want your data to be scattered all over the place!</p>

<!-- HTH_TEXT -->
<p>Besides this one-app-one-dir approach, there&#39;s also the one-app-one-file approach. Like a ZIP-file or TAR-ball, but executable. It looks like an ideal way of keeping related files together. I&#39;ll return to this topic later on, because it turns out to be not only a theory: it has already been implemented. Anyway, you still need to build your application in one directory tree.</p>

<!-- HTH_TEXT -->
<p>A couple of things you have to take care of when creating the application:</p>

<!-- HTH_L -->
<ul>
<li>The entry point of the application is <tt>init.rb</tt> . I&#39;ll explain this in &quot;<a href='#pack' title='Open: #pack'>Pack the Application (the RBA)</a>&quot;.</li>
<li>Use only directories and files. No links, no permissions, no owners, no groups. All this is for being platform-independent as much as possible.</li>
<li>Don&#39;t rely on shared libraries which are not part of the Ruby environment. Unless you are absolutely sure your customer has installed these libraries. For example: the Ruby bindings for TK are considered to be part of your Ruby environment, TK itself isn&#39;t. For that reason, I like <a href='../rubywebdialogs/index.html' title='Open: ../rubywebdialogs/index.html'>RubyWebDialogs</a> (pure Ruby!) and <a href='http://wxruby.rubyforge.org/wiki/wiki.pl' target='_blank' title='Open in a new window: http://wxruby.rubyforge.org/wiki/wiki.pl'>WxRuby</a> (native widgets).</li>
</ul>

<!-- HTH_HR -->
<hr>

<!-- HTH_HEADER -->
<h1><a name='3.0.0'></a><a name='pack'></a><a href='#pack' title='Link to this section'>3. Pack the Application (the RBA)</a></h1>

<!-- HTH_TEXT -->
<p>The next step is packing it all into one file, which we can mail, or ship, or publish on the &#39;Net, or distribute to all the workstations. Traditionally, we put them in a ZIP-file or a TAR-ball, which has to be extracted manually by the customer. Not all customers know or want to know how to do that. They only want to run the application. The goal of most software companies is to reach as much people as possible: &quot;More people&quot; means &quot;more money&quot;. So they make software for stupid customers and get rich. (It worked for Microsoft...) And open source developers want to make more people happy. To achieve this, we&#39;ve created installers, e.g. NSIS.</p>

<!-- HTH_TEXT -->
<p>I want to go back one step and ask this question: Do we really need to install an application before we can use it? We can rewrite this question: Why do we install an application, anyway? Mostly, because we have to recreate the environment in which the application has to live. We shouldn&#39;t bother our customer with recreating this environment. He just wants to double click on an icon. That&#39;s what he understands: &quot;To start an application, you have to double click on the icon.&quot; If we manage to get our software down to this level, we can reach even more people. More people being happy, more money.</p>

<!-- HTH_TEXT -->
<p>JAR&#39;s (Java Archives) are a common way in the Java universe to package applications, or libraries, or applets. It&#39;s one file, you can launch it by double clicking, it&#39;s sealed, it&#39;s simple. It&#39;s good. Can we do this with Ruby? Yes, we can. Do we have to change the runtime environment? No, we don&#39;t. But Java knows how to handle JAR&#39;s and Ruby doesn&#39;t know how to handle RBA&#39;s (Ruby Archives): We need extra tools! No we don&#39;t. And yes, it already exists. It&#39;s called <a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a>.</p>

<!-- HTH_TEXT -->
<p><a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a> transforms a directory tree, containing your application, into one single Ruby script, called the RBA (Ruby Archive), along with some code to handle this archive and start the application. This RBA can be distributed to our friends. When they&#39;ve installed Ruby, they just double click, and your application is up and running! See the examples section of <a href='../rubywebdialogs/index.html' title='Open: ../rubywebdialogs/index.html'>RubyWebDialogs</a> for some demos.</p>

<!-- HTH_TEXT -->
<p>To create the RBA:</p>

<!-- HTH_TEXT -->
<pre>$ ruby <a href='../tar2rubyscript/download/tar2rubyscript.rb' title='Download: ../tar2rubyscript/download/tar2rubyscript.rb'>tar2rubyscript.rb</a> <i>application</i>/</pre>

<!-- HTH_TEXT -->
<p>The result, <tt><i>application</i></tt><tt>.rb</tt>, <b>is</b> the application and can run like any script:</p>

<!-- HTH_TEXT -->
<pre>$ ruby <i>application</i>.rb</pre>

<!-- HTH_TEXT -->
<p><a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a> knows how to handle the embedded archive and is able to extract it to a temporary directory. After that, it simply loads <tt>init.rb</tt>, if present, in the newly created directory. This <tt>init.rb</tt> is our entry point.</p>

<!-- HTH_HR -->
<hr>

<!-- HTH_HEADER -->
<h1><a name='4.0.0'></a><a name='4.0.0'></a><a href='#4.0.0' title='Link to this section'>4. Distribute the Application (the Executable)</a></h1>

<!-- HTH_TEXT -->
<p>Until now, we assumed that our customer has installed Ruby. Even worse: we assumed that he has installed the same libraries as we have. And the same gems. And that he has the same versions, or at least compatible versions. Well, that&#39;s a lot of assumptions. Unwelcome assumptions. It would be nice if we could assume that the customers hasn&#39;t installed Ruby at all. That&#39;s where <a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a> comes in.</p>

<!-- HTH_TEXT -->
<p><a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a> transforms the RBA (well, any Ruby script...) into a standalone Windows, Linux or Darwin executable. You can look at it as a &quot;compiler&quot;. Not in the sense of a source-code-to-byte-code compiler, but as a &quot;collector&quot;, for it collects all necessary files to run the application on an other machine: the RBA, the Ruby interpreter and the Ruby runtime library (stripped down for this application). Anyway, the result is the same: a standalone executable (<tt><i>application</i></tt><tt>.exe</tt>). And that&#39;s what we want!</p>

<!-- HTH_TEXT -->
<p>To create the executable:</p>

<!-- HTH_TEXT -->
<pre>$ ruby <a href='../rubyscript2exe/download/rubyscript2exe.rb' title='Download: ../rubyscript2exe/download/rubyscript2exe.rb'>rubyscript2exe.rb</a> <i>application</i>.rb</pre>

<!-- HTH_TEXT -->
<p>You can copy the result (<tt><i>application</i></tt><tt>.exe</tt> on Windows, <tt><i>application</i></tt><tt>_linux</tt> on Linux and <tt><i>application</i></tt><tt>_darwin</tt> on Darwin) to another machine and run the application! Even on a machine without Ruby.</p>

<!-- HTH_TEXT -->
<p>To list the contents of the executable and the contents of the RBA:</p>

<!-- HTH_TEXT -->
<pre>$ ./<i>application</i>_linux --eee-list
$ ./<i>application</i>_linux --tar2rubyscript-list</pre>

<!-- HTH_TEXT -->
<p>On Windows, it&#39;s:</p>

<!-- HTH_TEXT -->
<pre>c:\home\erik&gt; <i>application</i>.exe --eee-list
c:\home\erik&gt; <i>application</i>.exe --tar2rubyscript-list</pre>

<!-- HTH_HR -->
<hr>

<!-- HTH_HEADER -->
<h1><a name='5.0.0'></a><a name='5.0.0'></a><a href='#5.0.0' title='Link to this section'>5. Summary</a></h1>

<!-- HTH_TEXT -->
<p>To create the RBA and the executable:</p>

<!-- HTH_TEXT -->
<pre>$ ruby <a href='../tar2rubyscript/download/tar2rubyscript.rb' title='Download: ../tar2rubyscript/download/tar2rubyscript.rb'>tar2rubyscript.rb</a> <i>application</i>/
$ ruby <a href='../rubyscript2exe/download/rubyscript2exe.rb' title='Download: ../rubyscript2exe/download/rubyscript2exe.rb'>rubyscript2exe.rb</a> <i>application</i>.rb</pre>

<!-- HTH_TEXT -->
<p>To list the contents of the executable and the contents of the RBA:</p>

<!-- HTH_TEXT -->
<pre>$ ./<i>application</i>_linux --eee-list
$ ./<i>application</i>_linux --tar2rubyscript-list</pre>

<!-- HTH_TEXT -->
<p>Have a look at the sites of <a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a> and <a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a> for the usage and other detailed information of both products.</p>

<!-- HTH_HR -->
<hr>

<!-- HTH_HEADER -->
<h1><a name='6.0.0'></a><a name='6.0.0'></a><a href='#6.0.0' title='Link to this section'>6. Tutorials</a></h1>

<!-- HTH_TEXT -->
<p>For now, I&#39;m working on only one tutorial: <a href='rails.html' title='Open: rails.html'>Distributing Rails Applications</a>.</p>

<!-- HTH_HR -->
<hr>

<!-- HTH_HEADER -->
<h1><a name='7.0.0'></a><a name='7.0.0'></a><a href='#7.0.0' title='Link to this section'>7. Future</a></h1>

<!-- HTH_TEXT -->
<p>These sections are just theories. They are not not (yet) (fully) implemented and probably never will be. If you&#39;re satisfied with the previous sections and the executable, you can stop reading...</p>

<!-- HTH_HEADER -->
<h2><a name='7.1.0'></a><a name='7.1.0'></a><a href='#7.1.0' title='Link to this section'>7.1. One Step</a></h2>

<!-- HTH_TEXT -->
<p>I&#39;m contemplating the combination <a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a> and <a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a> in just one step:</p>

<!-- HTH_TEXT -->
<pre>$ ruby rubyscript2exe.rb <i>application</i>/</pre>

<!-- HTH_TEXT -->
<p><a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a> already knows how to embed files and directories. Starting <tt>ruby init.rb</tt> in the given directory can&#39;t be too difficult...</p>

<!-- HTH_HEADER -->
<h2><a name='7.2.0'></a><a name='7.2.0'></a><a href='#7.2.0' title='Link to this section'>7.2. Enriching the RBA</a></h2>

<!-- HTH_TEXT -->
<p>We&#39;ve created an RBA and an executable. The RBA contains the application and the executable contains the RBA and everything else to run the application.</p>

<!-- HTH_TEXT -->
<p>There&#39;s something wrong with this picture. We can&#39;t ship the RBA instead of the executable, unless our customer has installed the same libraries and gems as we have. At least the ones required or loaded by our application. And it would be nice if the versions were the same as well. Can&#39;t we just ship our libraries and gems along with our application to avoid these dependencies? Can&#39;t we just copy the necessary files from <tt>sitelibdir</tt> and <tt>gemdir</tt> into the RBA?</p>

<!-- HTH_TEXT -->
<p>Yes we can, if <a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a> is able to detect and embed all necessary <tt>sitelibdir</tt>-files and <tt>rubygem</tt>-files (and their <tt>dll</tt>&#39;s and <tt>so</tt>&#39;s, determined recursively) and if <a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a> is able to detect and embed all necessary files except the <tt>sitelibdir</tt>-files and <tt>rubygem</tt>-files. Combining these features results in an enriched RBA and the same executable. The RBA can run on a plain Ruby installation and the executable can run on any machine (with the corresponding OS).</p>

<!-- HTH_TEXT -->
<p>In an ideal world, this RBA contains just Ruby files and no <tt>so</tt>-files, so the application is platform agnostic, like Ruby itself. For example, the examples of <a href='../rubywebdialogs/index.html' title='Open: ../rubywebdialogs/index.html'>RubyWebDialogs</a> are perfectly enriched RBA&#39;s.</p>

<!-- HTH_TEXT -->
<p>At the time of writing, <a href='../tar2rubyscript/index.html' title='Open: ../tar2rubyscript/index.html'>Tar2RubyScript</a> and <a href='../rubyscript2exe/index.html' title='Open: ../rubyscript2exe/index.html'>RubyScript2Exe</a> are not able to do this optimization.</p>

<!-- HTH_TEXT -->
<p>The following two images show the differences.</p>

<!-- HTH_EOP -->
<!-- PAGE BREAK -->

<!-- HTH_IMG -->
<p align='center'><img src='images/distributingrubyapplications2.dia.gif' alt='[images/distributingrubyapplications2.dia.gif]' title='No enriched RBA' border='0'></p>

<!-- HTH_IMG -->
<p align='center'><img src='images/distributingrubyapplications3.dia.gif' alt='[images/distributingrubyapplications3.dia.gif]' title='Enriched RBA' border='0'></p>

<!-- HTH_EOP -->
<!-- PAGE BREAK -->

<!-- HTH_HR -->
<hr>

<!-- HTH_RSS -->
<div title='RSS ../index.rss'><a  class='rss'href='../index.rss'>&nbsp;RSS&nbsp;</a></div>

<!-- HTH_NEDSTAT -->
<p><a target='_blank' href='http://v1.nedstatbasic.net/stats?ADLjdACiXrPgq9VX7QeFqqtYrVFg'><img src='http://m1.nedstatbasic.net/n?id=ADLjdACiXrPgq9VX7QeFqqtYrVFg' border='0' width='18' height='18' alt='Nedstat Basic - Free web site statistics'/></a></p>

<p align='center'><font size='1' color='white'>aior all allinone allinoneruby applications archive bin browser code codesnippet codesnippets compile compiler computer computerlanguage dialog dialogs distribute distributing distributingrubyapplications distribution eee eee-file eeefile erik erikveen erikveenstra exe executable exerb file graphical graphicaluserinterface gui gz html http httpserver iloveruby interface jar jit just justintime lang language one pack package packaging packing packingrubyapplications programming programminglanguage rar rb rb2bin rb2exe rba rbarchive rbtobin rbtoexe rbw ruby ruby2bin ruby2exe rubyapplications rubyarchive rubycompiler rubyscript rubyscript2 rubyscript2exe rubyscripts rubyscripttoexe rubytobin rubytoexe rubyweb rubywebdialog rubywebdialogs script scripts server snippet snippets t2rb t2rs tar tar2rb tar2rbscript tar2rs tar2rscript time ui user userinterface veenstra web webbrowser webdialog webdialogs window windowinbrowser windows wrap wrapper wxruby zip</font></p>

</div>
</body>
</html>
