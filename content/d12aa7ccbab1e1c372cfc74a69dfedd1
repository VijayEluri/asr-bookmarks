<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<script type="text/javascript">(function() { var a=window;function c(b){this.t={};this.tick=function(d,i,e){e=e?e:(new Date).getTime();this.t[d]=[e,i]};this.tick("start",null,b)}var f=new c;a.jstiming={Timer:c,load:f};try{var g=null;if(a.chrome&&a.chrome.csi)g=Math.floor(a.chrome.csi().pageT);if(g==null)if(a.gtbExternal)g=a.gtbExternal.pageT();if(g==null)if(a.external)g=a.external.pageT;if(g)a.jstiming.pt=g}catch(h){};a.tickAboveFold=function(b){b=b;var d=0;if(b.offsetParent){do d+=b.offsetTop;while(b=b.offsetParent)}b=d;b<=750&&a.jstiming.load.tick("aft")};var j=false;function k(){if(!j){j=true;a.jstiming.load.tick("firstScrollTime")}}a.addEventListener?a.addEventListener("scroll",k,false):a.attachEvent("onscroll",k);
 })();</script>
<meta content='true' name='MSSmartTagsPreventParsing'/>
<meta content='blogger' name='generator'/>
<link href='http://www.blogger.com/favicon.ico' rel='icon' type='image/vnd.microsoft.icon'/>
<link href='http://blog.j15r.com/2005/02/mapping-google.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="as simple as possible, but no simpler - Atom" href="http://blog.j15r.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="as simple as possible, but no simpler - RSS" href="http://blog.j15r.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="as simple as possible, but no simpler - Atom" href="http://www.blogger.com/feeds/14995055/posts/default" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.blogger.com/rsd.g?blogID=14995055" />
<link rel="alternate" type="application/atom+xml" title="as simple as possible, but no simpler - Atom" href="http://blog.j15r.com/feeds/116818019991521367/comments/default" />
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } })(); </script> <![endif]-->
<title>as simple as possible, but no simpler: Mapping Google</title>
<link type='text/css' rel='stylesheet' href='http://www.blogger.com/static/v1/widgets/1743847221-widget_css_bundle.css' />
 <link rel="stylesheet" type="text/css" href="http://www.blogger.com/dyn-css/authorization.css?targetBlogID=14995055&zx=c958d126-bf29-4260-aab1-134b0784f4fa"/>
<style type="text/css">#navbar-iframe { display:block }
</style>

<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Stretch Denim
Designer: Darren Delaye
URL:      www.DarrenDelaye.com
Date:     11 Jul 2006
-----------------------------------------------
*/
/* Variable definitions
====================
<Variable name="bgColor" description="Page Background Color"
type="color" default="#efefef">
<Variable name="textColor" description="Text Color"
type="color" default="#333333">
<Variable name="linkColor" description="Link Color"
type="color" default="#336699">
<Variable name="headerBgColor" description="Page Header Background Color"
type="color" default="#336699">
<Variable name="headerTextColor" description="Page Header Text Color"
type="color" default="#ffffff">
<Variable name="headerCornersColor" description="Page Header Corners Color"
type="color" default="#528bc5">
<Variable name="mainBgColor" description="Main Background Color"
type="color" default="#ffffff">
<Variable name="borderColor" description="Border Color"
type="color" default="#cccccc">
<Variable name="dateHeaderColor" description="Date Header Color"
type="color" default="#999999">
<Variable name="sidebarTitleBgColor" description="Sidebar Title Background Color"
type="color" default="#ffd595">
<Variable name="sidebarTitleTextColor" description="Sidebar Title Text Color"
type="color" default="#333333">
<Variable name="bodyFont" description="Text Font"
type="font" default="normal normal 100% Verdana, Arial, Sans-serif;">
<Variable name="headerFont" description="Page Header Font"
type="font" default="normal normal 210% Verdana, Arial, Sans-serif;">
*/
body {
background: #efefef;
margin: 0;
padding: 0px;
font: x-small Verdana, Arial;
text-align: center;
color: #333333;
font-size/* */:/**/small;
font-size: /**/small;
}
a:link {
color: #336699;
}
a:visited {
color: #336699;
}
a img {
border-width: 0;
}
#outer-wrapper {
font: normal normal 100% Verdana, Arial, Sans-serif;;
}
/* Header
----------------------------------------------- */
#header-wrapper {
margin:0;
padding: 0;
background-color: #528bc5;
text-align: left;
}
#header {
margin: 0 2%;
background: url('http://grimpoteuthis.org/grimpoteuthis_blue.png') no-repeat right;
background-color: #336699;
color: #ffffff;
padding: 0;
font: normal normal 210% Verdana, Arial, Sans-serif;;
position: relative;
}
h1.title {
padding-top: 38px;
margin: 0 1% .1em;
line-height: 1.2em;
font-size: 100%;
}
h1.title a {
color: #ffffff;
text-decoration: none;
}
#header .description {
display: block;
margin: 0 1%;
padding: 0 0 40px;
line-height: 1.4em;
font-size: 50%;
}
/* Content
----------------------------------------------- */
.clear {
clear: both;
}
#content-wrapper {
margin: 0 2%;
padding: 0 0 15px;
text-align: left;
background-color: #ffffff;
border: 1px solid #cccccc;
border-top: 0;
}
#main-wrapper {
margin-left: 1%;
width: 64%;
float: left;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
#sidebar-wrapper {
margin-right: 1%;
width: 29%;
float: right;
background-color: #ffffff;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
/* Headings
----------------------------------------------- */
h2, h3 {
margin: 0;
}
/* Posts
----------------------------------------------- */
.date-header {
margin: 1.5em 0 0;
font-weight: normal;
color: #999999;
font-size: 100%;
}
.post {
margin: 0 0 1.5em;
padding-bottom: 1.5em;
}
.post-title {
margin: 0;
padding: 0;
font-size: 125%;
font-weight: bold;
line-height: 1.1em;
}
.post-title a, .post-title a:visited, .post-title strong {
text-decoration: none;
color: #333333;
font-weight: bold;
}
.post div {
margin: 0 0 .75em;
line-height: 1.3em;
}
p.post-footer {
margin: -.25em 0 0;
color: #ffffff;
font-size: 83%;
}
.post-footer .span {
margin-right: .3em;
}
.comment-link {
margin-left: .3em;
}
.post img {
padding: 4px;
border: 1px solid #cccccc;
}
.post blockquote {
margin: 1em 20px;
}
.post blockquote p {
margin: .75em 0;
}
/* Comments
----------------------------------------------- */
#comments h4 {
margin: 1em 0;
color: #999999;
}
#comments h4 strong {
font-size: 110%;
}
#comments-block {
margin: 1em 0 1.5em;
line-height: 1.3em;
}
#comments-block dt {
margin: .5em 0;
}
#comments-block dd {
margin: .25em 0 0;
}
#comments-block dd.comment-footer {
margin: -.25em 0 2em;
line-height: 1.4em;
font-size: 78%;
}
#comments-block dd p {
margin: 0 0 .75em;
}
.deleted-comment {
font-style:italic;
color:gray;
}
.feed-links {
clear: both;
line-height: 2.5em;
}
#blog-pager-newer-link {
float: left;
}
#blog-pager-older-link {
float: right;
}
#blog-pager {
text-align: center;
}
/* Sidebar Content
----------------------------------------------- */
.sidebar h2 {
margin: 1.6em 0 .5em;
padding: 4px 5px;
background-color: #ffd595;
font-size: 100%;
color: #333333;
}
.sidebar ul {
margin: 0;
padding: 0;
list-style: none;
}
.sidebar li {
margin: 0;
padding: 0 0 .5em 15px;
text-indent: -15px;
line-height: 1.5em;
}
.sidebar {
color: #333333;
line-height:1.3em;
}
.sidebar .widget {
margin-bottom: 1em;
}
.sidebar .widget-content {
margin: 0 5px;
}
/* Profile
----------------------------------------------- */
.profile-img {
float: left;
margin: 0 5px 5px 0;
padding: 4px;
border: 1px solid #cccccc;
}
.profile-data {
margin:0;
text-transform:uppercase;
letter-spacing:.1em;
font-weight: bold;
line-height: 1.6em;
font-size: 78%;
}
.profile-datablock {
margin:.5em 0 .5em;
}
.profile-textblock {
margin: 0.5em 0;
line-height: 1.6em;
}
/* Footer
----------------------------------------------- */
#footer {
clear: both;
text-align: center;
color: #333333;
}
#footer .widget {
margin:.5em;
padding-top: 20px;
font-size: 85%;
line-height: 1.5em;
text-align: left;
}
/** Page structure tweaks for layout editor wireframe */
body#layout #header {
width: 750px;
margin-left: 0;
margin-right: 0;
}

--></style>
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script></head>
<body>
<div class='navbar section' id='navbar'><div class='widget Navbar' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener("load",
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<iframe src="http://www.blogger.com/navbar.g?targetBlogID=14995055&amp;blogName=as+simple+as+possible%2C+but+no+simpler&amp;publishMode=PUBLISH_MODE_HOSTED&amp;navbarType=BLUE&amp;layoutType=LAYOUTS&amp;searchRoot=http%3A%2F%2Fblog.j15r.com%2Fsearch&amp;blogLocale=en_US&amp;homepageUrl=http%3A%2F%2Fblog.j15r.com%2F&amp;targetPostID=116818019991521367" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" height="30px" width="100%" id="navbar-iframe" allowtransparency="true" title="Blogger Navigation and Search"></iframe>
<div></div></div></div>
<div id='outer-wrapper'><div id='wrap2'>
<!-- skip links for text browsers -->
<span id='skiplinks' style='display:none;'>
<a href='#main'>skip to main </a> |
      <a href='#sidebar'>skip to sidebar</a>
</span>
<div id='header-wrapper'>
<div class='header section' id='header'><div class='widget Header' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://blog.j15r.com/'>as simple as possible, but no simpler</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>
</span></p>
</div>
</div>
</div></div>
</div>
<div id='content-wrapper'>
<div id='crosscol-wrapper' style='text-align:center'>
<div class='crosscol section' id='crosscol'></div>
</div>
<div id='main-wrapper'>
<div class='main section' id='main'><div class='widget Blog' id='Blog1'>
<div class='blog-posts hfeed'>
<!-- google_ad_section_start(name=default) -->

          <div class="date-outer">
        
<h2 class='date-header'><span>Wednesday, February 09, 2005</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template'>
<a name='116818019991521367'></a>
<h3 class='post-title entry-title'>
<a href='http://blog.j15r.com/2005/02/mapping-google.html'>Mapping Google</a>
</h3>
<div class='post-header-line-1'></div>
<div class='post-body entry-content'>
<p>By now, many of you will have gone and tried out the new Google Maps
application. By and large, you have to admit that it's pretty damned slick for
a DHTML web application -- even my wife was impressed, and that's not easy with
geek toys. So, in the spirit of Google Suggest and GMail, I've decided to have
a quick peek under the hood to figure out what makes it tick.</p>

<h2>Not quite like GMail</h2>

<p>The first thing I noticed is that it doesn't quite work like GMail. Whereas
GMail uses XMLHttp to make calls back to the server, Google Maps uses a hidden
IFrame. Each method has its benefits, as I'll discuss below, but this
difference of approach does seem to imply that it may not be the same team
doing the work.</p>

<h2>The Graphics</h2>

<p>Probably the most striking thing about Google Maps is the very impressive (for
DHTML, anyway) graphics. Now, I'm sure that many of you old JavaScript hacks
out there have known this sort of thing was possible for a long time, but it's
very cool to see it (a) actually being used for something real, and (b) where
normal users will see it.</p>

<p>For those to whom the implementation is less than obvious, here's a quick
breakdown. The top and side bars are (more or less) simply HTML. The center
pane with the map, however, is a different beast. First, let's address the map
itself. It is broken up into a grid of 128x128 images (basically like an old
tile-based scrolling console game). The dragging code is nothing new, but the
cool trick here is that each of these images is absolutely positioned -- and
the 'infinite' scrolling effect is achieved by picking up tiles that are
off-screen on one end and placing them down on the other end. The effect is
kind of like laying track for a train by picking up track from behind it.</p>

<p><center>
  <img src="http://photos1.blogger.com/x/blogger/7678/661/320/219085/Tiles.png"/></p>

<p><em>Google map, with tiles outlined</em>
</center></p>

<p>The push-pins and info-popups are a different matter. Simply placing them is no
big trick; an absolutely-positioned transparent GIF does the trick nicely. The
shadows, however, are a different matter. They are PNGs with 8-bit alpha
channels. Personally, I didn't even realize you could depend upon the browser
to render these correctly, but apparently (at least with IE6 and Mozilla), you
can. And they actually render pretty quickly -- for proof, check out the
overlaid route image (at the end of the article), which is often as big as the
entire map view.</p>

<p><center>
  <img src="http://photos1.blogger.com/x/blogger/7678/661/320/239629/Pin.gif"/></p>

<p><em>The pushpin, with its two images outlined</em>
</center></p>

<h2>Communicating with the Server</h2>

<p>There are two ways in which Google Maps has to communicate with the server. The
first is to get map images, and the second is to get search results. It turns
out that getting map images is remarkably easy -- all you have to do is set an
image tile's URL. Because the coordinate system is known and fixed (each tile
represents a known area specified in longitude and latitude, at a given zoom
level), the client has all the information it needs to set tile URLs. Each tile
URL is of the following form:</p>

<pre><code>http://mt.google.com/mt?v=.1&amp;x={x tile index}&amp;{y tile index}=2&amp;zoom={zoom level}
</code></pre>

<p>I'm not sure what the 'v' argument specifies, but it never seems to change. The
others are fairly self-explanatory. One nice side effect of this is that the
images have fixed URLs for a given chunk of the earth's surface, so they get
cached. If you're doing most of your searches in one region, then the app can
be quite snappy once everything gets cached.</p>

<p>Doing searches is another matter. Clearly, you can't 'submit' the entire page,
because that would destroy your map and other context. Google's solution is to
submit a hidden IFrame, then gather the search results from it. Let's say, for
example, that you simply wanted to go to Atlanta. You type 'Atlanta' in the
search area, and the following HTTP GET is made:</p>

<pre><code>http://maps.google.com/maps?q=atlanta&amp;amp;z=13&amp;sll=37.062500%2C-95.677068&amp;sspn=37.062500%2C80.511950&amp;output=js
</code></pre>

<p>There are a couple of things to notice here. The 'question' is passed in the
'q' parameter (much like Google). The other arguments are 'z' for zoom, 'sll'
for longitude &amp;amp;amp;amp;amp;amp;amp; latitude (your current focus, I
believe), and 'sspn' to specify the span/size of your viewing area. What's
interesting is what comes back:</p>

<pre><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"/&gt;
    &lt;title&gt;Google Maps - atlanta&lt;/title&gt;
    &lt;script type="text/javascript"&gt;
    //&lt;![CDATA[
    function load() {
      if (window.parent &amp;amp;&amp; window.parent._load) {
        window.parent._load({big chunk of XML}, window.document);
      }
    }
    //]]&gt;
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body onload="load()"&gt;
    &lt;input id="zoom" type="text" value=""/&gt;
    &lt;input id="centerlat" type="text" value=""/&gt;
    &lt;input id="centerlng" type="text" value=""/&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>This HTML is loaded into the hidden IFrame which, when loaded, will punt a big
chunk of XML back up to the outer frame's _load() function. This is kind of a
cool trick, because it saves the outer frame from having to determine when the
IFrame is done loading.</p>

<p>I mentioned before that there was some advantage to be had by using a hidden
IFrame over making direct XMLHttp requests. One of these is that the IFrame's
state affects the back button. So every time you do a search, it creates a new
history entry. This creates an excellent user experience, because pressing the
back button always takes you back to the last major action you performed (and
the forward button works just as well).</p>

<h2>Big Hunks of XML</h2>

<p>Ok, so now the outer frame's code has a big chunk of XMl. What can it do with
that? Well, it turns out that Google Maps depends upon two built-in browser
components: XMLHttpRequest and XSLTProcessor. Oddly enough, even though it
doesn't use XMLHttpRequest for making calls to the server, it <em>does</em> use it for
parsing XML. I'll get to the XSLT later.</p>

<p>Here's an example of the XML response that comes back from the 'Atlanta'
request above:</p>

<pre><code>&lt;?xml version="1.0"?&gt;
&lt;page&gt;
  &lt;title&gt;atlanta&lt;/title&gt;
  &lt;query&gt;atlanta&lt;/query&gt;
  &lt;center lat="33.748889" lng="-84.388056"/&gt;
  &lt;span lat="0.089988" lng="0.108228"/&gt;
  &lt;overlay panelStyle="/mapfiles/geocodepanel.xsl"&gt;
    &lt;location infoStyle="/mapfiles/geocodeinfo.xsl" id="A"&gt;
      &lt;point lat="33.748889" lng="-84.388056"/&gt;
      &lt;icon class="noicon"/&gt;
      &lt;info&gt;
        &lt;title xml:space="preserve"&gt;&lt;/title&gt;
        &lt;address&gt;
          &lt;line&gt;Atlanta, GA&lt;/line&gt;
        &lt;/address&gt;
      &lt;/info&gt;
    &lt;/location&gt;
  &lt;/overlay&gt;
&lt;/page&gt;
</code></pre>

<p>Nothing surprising here -- we have a title, query, center &amp; span, and the
location and name of the search result. For a slightly more interesting case,
let's look at the response when searching for 'pizza in atlanta':</p>

<pre><code>&lt;pre&gt;
&lt;?xml version="1.0" ?&gt;
&lt;page&gt;
  &lt;title&gt;pizza in atlanta&lt;/title&gt;
  &lt;query&gt;pizza in atlanta&lt;/query&gt;
  &lt;center lat="33.748888" lng="-84.388056" /&gt;
  &lt;span lat="0.016622" lng="0.017714" /&gt;
  &lt;overlay panelStyle="/mapfiles/localpanel.xsl"&gt;
    &lt;location infoStyle="/mapfiles/localinfo.xsl" id="A"&gt;
      &lt;point lat="33.752099" lng="-84.391900" /&gt;
      &lt;icon image="/mapfiles/markerA.png" class="local" /&gt;
      &lt;info&gt;
        &lt;title xml:space="preserve"&gt;Kentucky Fried Chicken/Taco Bell/&lt;b&gt;Pizza&lt;/b&gt; Hut&lt;/title&gt;
        &lt;address&gt;
          &lt;line&gt;87 Peachtree St SW&lt;/line&gt;
          &lt;line&gt;Atlanta, GA 30303&lt;/line&gt;
        &lt;/address&gt;
        &lt;phone&gt;(404) 658-1532&lt;/phone&gt;
        &lt;distance&gt;0.3 mi NW&lt;/distance&gt;
        &lt;description&gt;
          &lt;references count="9"&gt;
            &lt;reference&gt;
              &lt;url&gt;http://www.metroatlantayellowpages.com/pizzaatlanta.htm&lt;/url&gt;
              &lt;domain&gt;metroatlantayellowpages.com&lt;/domain&gt;
              &lt;title xml:space="preserve"&gt;Atlanta&lt;b&gt;Pizza&lt;/b&gt; Guide-Alphabetical Listings of Atlanta&lt;b&gt;...&lt;/b&gt;&lt;/title&gt;
            &lt;/reference&gt;
          &lt;/references&gt;
        &lt;/description&gt;
        &lt;url&gt;http://local.google.com/local?q=pizza&amp;near=atlanta&amp;amp;amp;amp;amp;amp;amp;amp;latlng=33748889,-84388056,11825991348281990841&lt;/url&gt;
      &lt;/info&gt;
    &lt;/location&gt;
    { lots more locations... }
  &lt;/overlay&gt;
&lt;/page&gt;
</code></pre>

<p>Again, nothing too surprising when you think about the data that's going to
show in the map pane. But how do the results get shown in the search result
area to the right? This is where things get a little wacky. The JavaScript
actually uses the XSLTProcessor component I mentioned earlier to apply an XSLT
to the result XML. This generates HTML which is then shown in the right panel.
We've come to expect this sort of thing on the server, but this is the first
time I've ever seen it done on the client (I'm sure it saves Google lots of
cycles, but personally I didn't even know XSLTProcessor existed!)</p>

<h2>Driving Directions</h2>

<p>There's one last case to discuss, and that's driving directions. This works
just like other searches, including XSLT to show the results, with one
exception: the result XML includes a <polyline> tag that two opaque values
encoding the geometric route to be taken. This data appears to be base 64
encoded (or something similar, anyway). Remember the giant transparent PNG I
mentioned earlier for rendering routes? This data is used to render that
sucker. The data looks like this:</p>

<pre><code>&lt;polyline numLevels="4" zoomFactor="32"&gt;
  &lt;points&gt;k`dmEv`naOdGC??EtD??@|DAxL??hEFjJ@ ...&lt;/points&gt;
  &lt;levels&gt;BBB???BB?BB??@??@?????BB??@?????@? ...&lt;/levels&gt;
&lt;/polyline&gt;
</code></pre>

<p>This polyline data is then used to request the route PNG from the server using
a URL like so:</p>

<pre><code>http://www.google.com/maplinedraw?width=324&amp;height=564&amp;path=sRS?k@fB@?}As@e@CGAIA}@BwCEu@Bs@?E_@cACS@a@PaC ...
</code></pre>

<p><center>
  <img src="http://photos1.blogger.com/x/blogger/7678/661/320/118745/Route.png"/></p>

<p><em>The route overlay</em>
</center></p>

<h2>In Summary</h2>

<p>That's about it. I hope that demystifies this application a bit; the real
magic, of course, is all the work going on to enable this on the back-end. The
fact that Google's servers can handle all of these images requests, route
finding, line drawing, searches and the like so quickly is the real magic. I
also want to point out that their map renderer (or the one they purchased)
works <em>much</em> better than all the other ones I've seen on Mapquest, Mapblast,
and the like. That alone makes it worth using, if only so you can actually
<em>read</em> the map!</p>

<p>I also think it bears noting that Google is pulling out all the stops to build
rich web apps, no matter how weirdly they have to hack the browser to make them
go. And I strongly believe that this is a trend that is here to stay -- XHTML
Strict/CSS/etc be damned. At the end of the day, what really matters to users
is compelling apps that let them get their work done quickly.</p>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
Posted by
<span class='fn'>joel.</span>
</span>
<span class='post-timestamp'>
at
<a class='timestamp-link' href='http://blog.j15r.com/2005/02/mapping-google.html' rel='bookmark' title='permanent link'><abbr class='published' title='2005-02-09T09:29:00-05:00'>Wednesday, February 09, 2005</abbr></a>
</span>
<span class='reaction-buttons'>
</span>
<span class='star-ratings'>
</span>
<span class='post-comment-link'>
</span>
<span class='post-backlinks post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='http://www.blogger.com/email-post.g?blogID=14995055&postID=116818019991521367' title='Email Post'>
<img alt='' class='icon-action' height='13' src='http://www.blogger.com/img/icon18_email.gif' width='18'/>
</a>
</span>
</span>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<div id='disqus_thread'></div>
<div id='disqus_post_title' style='display:none;'>Mapping Google</div>
<div id='disqus_post_message' style='display:none;'><p>By now, many of you will have gone and tried out the new Google Maps
application. By and large, you have to admit that it's pretty damned slick for
a DHTML web application -- even my wife was impressed, and that's not easy with
geek toys. So, in the spirit of Google Suggest and GMail, I've decided to have
a quick peek under the hood to figure out what makes it tick.</p>

<h2>Not quite like GMail</h2>

<p>The first thing I noticed is that it doesn't quite work like GMail. Whereas
GMail uses XMLHttp to make calls back to the server, Google Maps uses a hidden
IFrame. Each method has its benefits, as I'll discuss below, but this
difference of approach does seem to imply that it may not be the same team
doing the work.</p>

<h2>The Graphics</h2>

<p>Probably the most striking thing about Google Maps is the very impressive (for
DHTML, anyway) graphics. Now, I'm sure that many of you old JavaScript hacks
out there have known this sort of thing was possible for a long time, but it's
very cool to see it (a) actually being used for something real, and (b) where
normal users will see it.</p>

<p>For those to whom the implementation is less than obvious, here's a quick
breakdown. The top and side bars are (more or less) simply HTML. The center
pane with the map, however, is a different beast. First, let's address the map
itself. It is broken up into a grid of 128x128 images (basically like an old
tile-based scrolling console game). The dragging code is nothing new, but the
cool trick here is that each of these images is absolutely positioned -- and
the 'infinite' scrolling effect is achieved by picking up tiles that are
off-screen on one end and placing them down on the other end. The effect is
kind of like laying track for a train by picking up track from behind it.</p>

<p><center>
  <img src="http://photos1.blogger.com/x/blogger/7678/661/320/219085/Tiles.png"/></p>

<p><em>Google map, with tiles outlined</em>
</center></p>

<p>The push-pins and info-popups are a different matter. Simply placing them is no
big trick; an absolutely-positioned transparent GIF does the trick nicely. The
shadows, however, are a different matter. They are PNGs with 8-bit alpha
channels. Personally, I didn't even realize you could depend upon the browser
to render these correctly, but apparently (at least with IE6 and Mozilla), you
can. And they actually render pretty quickly -- for proof, check out the
overlaid route image (at the end of the article), which is often as big as the
entire map view.</p>

<p><center>
  <img src="http://photos1.blogger.com/x/blogger/7678/661/320/239629/Pin.gif"/></p>

<p><em>The pushpin, with its two images outlined</em>
</center></p>

<h2>Communicating with the Server</h2>

<p>There are two ways in which Google Maps has to communicate with the server. The
first is to get map images, and the second is to get search results. It turns
out that getting map images is remarkably easy -- all you have to do is set an
image tile's URL. Because the coordinate system is known and fixed (each tile
represents a known area specified in longitude and latitude, at a given zoom
level), the client has all the information it needs to set tile URLs. Each tile
URL is of the following form:</p>

<pre><code>http://mt.google.com/mt?v=.1&amp;x={x tile index}&amp;{y tile index}=2&amp;zoom={zoom level}
</code></pre>

<p>I'm not sure what the 'v' argument specifies, but it never seems to change. The
others are fairly self-explanatory. One nice side effect of this is that the
images have fixed URLs for a given chunk of the earth's surface, so they get
cached. If you're doing most of your searches in one region, then the app can
be quite snappy once everything gets cached.</p>

<p>Doing searches is another matter. Clearly, you can't 'submit' the entire page,
because that would destroy your map and other context. Google's solution is to
submit a hidden IFrame, then gather the search results from it. Let's say, for
example, that you simply wanted to go to Atlanta. You type 'Atlanta' in the
search area, and the following HTTP GET is made:</p>

<pre><code>http://maps.google.com/maps?q=atlanta&amp;amp;z=13&amp;sll=37.062500%2C-95.677068&amp;sspn=37.062500%2C80.511950&amp;output=js
</code></pre>

<p>There are a couple of things to notice here. The 'question' is passed in the
'q' parameter (much like Google). The other arguments are 'z' for zoom, 'sll'
for longitude &amp;amp;amp;amp;amp;amp;amp; latitude (your current focus, I
believe), and 'sspn' to specify the span/size of your viewing area. What's
interesting is what comes back:</p>

<pre><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"/&gt;
    &lt;title&gt;Google Maps - atlanta&lt;/title&gt;
    &lt;script type="text/javascript"&gt;
    //&lt;![CDATA[
    function load() {
      if (window.parent &amp;amp;&amp; window.parent._load) {
        window.parent._load({big chunk of XML}, window.document);
      }
    }
    //]]&gt;
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body onload="load()"&gt;
    &lt;input id="zoom" type="text" value=""/&gt;
    &lt;input id="centerlat" type="text" value=""/&gt;
    &lt;input id="centerlng" type="text" value=""/&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>This HTML is loaded into the hidden IFrame which, when loaded, will punt a big
chunk of XML back up to the outer frame's _load() function. This is kind of a
cool trick, because it saves the outer frame from having to determine when the
IFrame is done loading.</p>

<p>I mentioned before that there was some advantage to be had by using a hidden
IFrame over making direct XMLHttp requests. One of these is that the IFrame's
state affects the back button. So every time you do a search, it creates a new
history entry. This creates an excellent user experience, because pressing the
back button always takes you back to the last major action you performed (and
the forward button works just as well).</p>

<h2>Big Hunks of XML</h2>

<p>Ok, so now the outer frame's code has a big chunk of XMl. What can it do with
that? Well, it turns out that Google Maps depends upon two built-in browser
components: XMLHttpRequest and XSLTProcessor. Oddly enough, even though it
doesn't use XMLHttpRequest for making calls to the server, it <em>does</em> use it for
parsing XML. I'll get to the XSLT later.</p>

<p>Here's an example of the XML response that comes back from the 'Atlanta'
request above:</p>

<pre><code>&lt;?xml version="1.0"?&gt;
&lt;page&gt;
  &lt;title&gt;atlanta&lt;/title&gt;
  &lt;query&gt;atlanta&lt;/query&gt;
  &lt;center lat="33.748889" lng="-84.388056"/&gt;
  &lt;span lat="0.089988" lng="0.108228"/&gt;
  &lt;overlay panelStyle="/mapfiles/geocodepanel.xsl"&gt;
    &lt;location infoStyle="/mapfiles/geocodeinfo.xsl" id="A"&gt;
      &lt;point lat="33.748889" lng="-84.388056"/&gt;
      &lt;icon class="noicon"/&gt;
      &lt;info&gt;
        &lt;title xml:space="preserve"&gt;&lt;/title&gt;
        &lt;address&gt;
          &lt;line&gt;Atlanta, GA&lt;/line&gt;
        &lt;/address&gt;
      &lt;/info&gt;
    &lt;/location&gt;
  &lt;/overlay&gt;
&lt;/page&gt;
</code></pre>

<p>Nothing surprising here -- we have a title, query, center &amp; span, and the
location and name of the search result. For a slightly more interesting case,
let's look at the response when searching for 'pizza in atlanta':</p>

<pre><code>&lt;pre&gt;
&lt;?xml version="1.0" ?&gt;
&lt;page&gt;
  &lt;title&gt;pizza in atlanta&lt;/title&gt;
  &lt;query&gt;pizza in atlanta&lt;/query&gt;
  &lt;center lat="33.748888" lng="-84.388056" /&gt;
  &lt;span lat="0.016622" lng="0.017714" /&gt;
  &lt;overlay panelStyle="/mapfiles/localpanel.xsl"&gt;
    &lt;location infoStyle="/mapfiles/localinfo.xsl" id="A"&gt;
      &lt;point lat="33.752099" lng="-84.391900" /&gt;
      &lt;icon image="/mapfiles/markerA.png" class="local" /&gt;
      &lt;info&gt;
        &lt;title xml:space="preserve"&gt;Kentucky Fried Chicken/Taco Bell/&lt;b&gt;Pizza&lt;/b&gt; Hut&lt;/title&gt;
        &lt;address&gt;
          &lt;line&gt;87 Peachtree St SW&lt;/line&gt;
          &lt;line&gt;Atlanta, GA 30303&lt;/line&gt;
        &lt;/address&gt;
        &lt;phone&gt;(404) 658-1532&lt;/phone&gt;
        &lt;distance&gt;0.3 mi NW&lt;/distance&gt;
        &lt;description&gt;
          &lt;references count="9"&gt;
            &lt;reference&gt;
              &lt;url&gt;http://www.metroatlantayellowpages.com/pizzaatlanta.htm&lt;/url&gt;
              &lt;domain&gt;metroatlantayellowpages.com&lt;/domain&gt;
              &lt;title xml:space="preserve"&gt;Atlanta&lt;b&gt;Pizza&lt;/b&gt; Guide-Alphabetical Listings of Atlanta&lt;b&gt;...&lt;/b&gt;&lt;/title&gt;
            &lt;/reference&gt;
          &lt;/references&gt;
        &lt;/description&gt;
        &lt;url&gt;http://local.google.com/local?q=pizza&amp;near=atlanta&amp;amp;amp;amp;amp;amp;amp;amp;latlng=33748889,-84388056,11825991348281990841&lt;/url&gt;
      &lt;/info&gt;
    &lt;/location&gt;
    { lots more locations... }
  &lt;/overlay&gt;
&lt;/page&gt;
</code></pre>

<p>Again, nothing too surprising when you think about the data that's going to
show in the map pane. But how do the results get shown in the search result
area to the right? This is where things get a little wacky. The JavaScript
actually uses the XSLTProcessor component I mentioned earlier to apply an XSLT
to the result XML. This generates HTML which is then shown in the right panel.
We've come to expect this sort of thing on the server, but this is the first
time I've ever seen it done on the client (I'm sure it saves Google lots of
cycles, but personally I didn't even know XSLTProcessor existed!)</p>

<h2>Driving Directions</h2>

<p>There's one last case to discuss, and that's driving directions. This works
just like other searches, including XSLT to show the results, with one
exception: the result XML includes a <polyline> tag that two opaque values
encoding the geometric route to be taken. This data appears to be base 64
encoded (or something similar, anyway). Remember the giant transparent PNG I
mentioned earlier for rendering routes? This data is used to render that
sucker. The data looks like this:</p>

<pre><code>&lt;polyline numLevels="4" zoomFactor="32"&gt;
  &lt;points&gt;k`dmEv`naOdGC??EtD??@|DAxL??hEFjJ@ ...&lt;/points&gt;
  &lt;levels&gt;BBB???BB?BB??@??@?????BB??@?????@? ...&lt;/levels&gt;
&lt;/polyline&gt;
</code></pre>

<p>This polyline data is then used to request the route PNG from the server using
a URL like so:</p>

<pre><code>http://www.google.com/maplinedraw?width=324&amp;height=564&amp;path=sRS?k@fB@?}As@e@CGAIA}@BwCEu@Bs@?E_@cACS@a@PaC ...
</code></pre>

<p><center>
  <img src="http://photos1.blogger.com/x/blogger/7678/661/320/118745/Route.png"/></p>

<p><em>The route overlay</em>
</center></p>

<h2>In Summary</h2>

<p>That's about it. I hope that demystifies this application a bit; the real
magic, of course, is all the work going on to enable this on the back-end. The
fact that Google's servers can handle all of these images requests, route
finding, line drawing, searches and the like so quickly is the real magic. I
also want to point out that their map renderer (or the one they purchased)
works <em>much</em> better than all the other ones I've seen on Mapquest, Mapblast,
and the like. That alone makes it worth using, if only so you can actually
<em>read</em> the map!</p>

<p>I also think it bears noting that Google is pulling out all the stops to build
rich web apps, no matter how weirdly they have to hack the browser to make them
go. And I strongly believe that this is a trend that is here to stay -- XHTML
Strict/CSS/etc be damned. At the end of the day, what really matters to users
is compelling apps that let them get their work done quickly.</p></div>
<script type='text/javascript'>
                var disqus_url = 'http://blog.j15r.com/2005/02/mapping-google.html';
                var disqus_title = document.getElementById('disqus_post_title').innerHTML;
                var disqus_message = document.getElementById('disqus_post_message').innerHTML;
        </script>
<script src='http://disqus.com/forums/j15r/embed.js' type='text/javascript'></script>
<noscript><a href='http://j15r.disqus.com/?url=http://blog.j15r.com/2005/02/mapping-google.html'>View the entire comment thread.</a></noscript>
<a class='dsq-brlink' href='http://disqus.com'>blog comments powered by <span class='logo-disqus'>Disqus</span></a>
<div id='backlinks-container'>
<div id='Blog1_backlinks-container'>
</div>
</div>
</div>
</div>
<div id="latency-116818019991521367"></div><script type="text/javascript">if (window['tickAboveFold']) {window['tickAboveFold'](document.getElementById("latency-116818019991521367")); } </script>

        </div></div>
      
<!-- google_ad_section_end -->
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://blog.j15r.com/2005/02/still-more-fun-with-maps.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://blog.j15r.com/2005/01/dhtml-leaks-like-sieve.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://blog.j15r.com/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://blog.j15r.com/feeds/116818019991521367/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
</div></div>
</div>
<div id='sidebar-wrapper'>
<div class='sidebar section' id='sidebar'><div class='widget BlogArchive' id='BlogArchive1'>
<h2>Blog Archive</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/search?updated-min=2010-01-01T00%3A00%3A00-05%3A00&updated-max=2011-01-01T00%3A00%3A00-05%3A00&max-results=4'>2010</a>
<span class='post-count' dir='ltr'>(4)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2010_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(2)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2010/09/ugly-bug-in-ie9-beta.html'>An Ugly Bug in the IE9 Beta</a></li>
<li><a href='http://blog.j15r.com/2010/09/ie9-memory-leaks-finally-declared-dead.html'>IE9: Memory Leaks Finally Declared Dead</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2010_04_01_archive.html'>April</a>
<span class='post-count' dir='ltr'>(2)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2010/04/trying-out-new-wave-element.html'>Trying out the new Wave element</a></li>
<li><a href='http://blog.j15r.com/2010/04/quake-ii-in-html5-what-does-this-really.html'>Quake II in HTML5 -- What does this really mean?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/search?updated-min=2009-01-01T00%3A00%3A00-05%3A00&updated-max=2010-01-01T00%3A00%3A00-05%3A00&max-results=4'>2009</a>
<span class='post-count' dir='ltr'>(4)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2009_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2009/09/javascript-variables-continued.html'>Javascript Variables, Continued</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2009_08_01_archive.html'>August</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2009/08/where-should-i-define-javascript.html'>Where should I define Javascript variables?</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2009_07_01_archive.html'>July</a>
<span class='post-count' dir='ltr'>(2)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2009/07/memory-leaks-in-ie8.html'>Memory Leaks in IE8</a></li>
<li><a href='http://blog.j15r.com/2009/07/note-i-originally-posted-this-last.html'>GWT, JavaScript, and the Correct Level of Abstract...</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/search?updated-min=2007-01-01T00%3A00%3A00-05%3A00&updated-max=2008-01-01T00%3A00%3A00-05%3A00&max-results=2'>2007</a>
<span class='post-count' dir='ltr'>(2)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2007_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2007/09/ies-memory-leak-fix-greatly-exaggerated.html'>IE&#39;s Memory Leak Fix Greatly Exaggerated</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2007_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2007/01/this-old-blog.html'>This Old Blog</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>&#9660;&#160;</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/search?updated-min=2005-01-01T00%3A00%3A00-05%3A00&updated-max=2006-01-01T00%3A00%3A00-05%3A00&max-results=11'>2005</a>
<span class='post-count' dir='ltr'>(11)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2005_07_01_archive.html'>July</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2005/07/google-maps-information.html'>Google Maps Information</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2005_06_01_archive.html'>June</a>
<span class='post-count' dir='ltr'>(3)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2005/06/another-word-or-two-on-memory-leaks.html'>Another Word or Two on Memory Leaks</a></li>
<li><a href='http://blog.j15r.com/2005/06/drip-02.html'>Drip 0.2</a></li>
<li><a href='http://blog.j15r.com/2005/06/drip-redux.html'>Drip Redux</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2005_05_01_archive.html'>May</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2005/05/drip-ie-leak-detector.html'>Drip: IE Leak Detector</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2005_04_01_archive.html'>April</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2005/04/more-maps.html'>More Maps</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2005_03_01_archive.html'>March</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2005/03/ajax-buzz.html'>Ajax Buzz</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>&#9660;&#160;</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2005_02_01_archive.html'>February</a>
<span class='post-count' dir='ltr'>(3)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2005/02/making-back-button-dance.html'>Making the Back Button Dance</a></li>
<li><a href='http://blog.j15r.com/2005/02/still-more-fun-with-maps.html'>Still more fun with maps</a></li>
<li><a href='http://blog.j15r.com/2005/02/mapping-google.html'>Mapping Google</a></li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2005_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2005/01/dhtml-leaks-like-sieve.html'>DHTML Leaks Like a Sieve</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/search?updated-min=2004-01-01T00%3A00%3A00-05%3A00&updated-max=2005-01-01T00%3A00%3A00-05%3A00&max-results=1'>2004</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

          &#9658;&#160;
        
</span>
</a>
<a class='post-count-link' href='http://blog.j15r.com/2004_12_01_archive.html'>December</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://blog.j15r.com/2004/12/insanity-of-http-compression.html'>The Insanity of HTTP Compression</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='http://www.blogger.com/rearrange?blogID=14995055&widgetType=BlogArchive&widgetId=BlogArchive1&action=editWidget' onclick='return _WidgetManager._PopupConfig(document.getElementById("BlogArchive1"));' target='configBlogArchive1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget LinkList' id='LinkList1'>
<h2>Links</h2>
<div class='widget-content'>
<ul>
<li><a href='http://code.google.com/webtoolkit/'>Google Web Toolkit</a></li>
<li><a href='http://code.google.com/p/iedrip/'>Drip Project Page</a></li>
</ul>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='http://www.blogger.com/rearrange?blogID=14995055&widgetType=LinkList&widgetId=LinkList1&action=editWidget' onclick='return _WidgetManager._PopupConfig(document.getElementById("LinkList1"));' target='configLinkList1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget Profile' id='Profile1'>
<h2>About Me</h2>
<div class='widget-content'>
<dl class='profile-datablock'>
<dt class='profile-data'>Joel Webber</dt>
<dd class='profile-textblock'>Engineer, Google Web Toolkit</dd>
</dl>
<a class='profile-link' href='http://www.blogger.com/profile/18063235960332996797'>View my complete profile</a>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='http://www.blogger.com/rearrange?blogID=14995055&widgetType=Profile&widgetId=Profile1&action=editWidget' onclick='return _WidgetManager._PopupConfig(document.getElementById("Profile1"));' target='configProfile1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div></div>
</div>
<!-- spacer for skins that want sidebar and main to be the same height-->
<div class='clear'>&#160;</div>
</div>
<!-- end content-wrapper -->
<div id='footer-wrapper'>
<div class='footer section' id='footer'></div>
</div>
</div></div>
<!-- end outer-wrapper -->
<script src='http://www.google-analytics.com/urchin.js' type='text/javascript'></script>
<script type='text/javascript'>
    _uacct = "UA-2632402-1";
    urchinTracker();
  </script>
<!-- +disqus -->
<!-- -disqus -->
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('widgetJsBefore');
</script><script type="text/javascript" src="http://www.blogger.com/static/v1/widgets/512629240-widgets.js"></script>
<script type='text/javascript'>
if (typeof(BLOG_attachCsiOnload) != 'undefined' && BLOG_attachCsiOnload != null) { window['blogger_templates_experiment_id'] = "templatesV1";window['blogger_blog_id'] = '14995055';BLOG_attachCsiOnload('item_'); }_WidgetManager._Init('http://www.blogger.com/rearrange?blogID=14995055','http://blog.j15r.com/2005/02/mapping-google.html','14995055');
_WidgetManager._SetPageActionUrl('http://www.blogger.com/display?blogID=14995055','3cnQDMT4lLi8iz3nEiAqFa13L3c:1292617785507','AOuZoY69gkf24WeOhidtK6M5iXpkDPJuWg:1292617785507');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'title': 'as simple as possible, but no simpler', 'pageType': 'item', 'url': 'http://blog.j15r.com/2005/02/mapping-google.html', 'canonicalUrl': 'http://blog.j15r.com/2005/02/mapping-google.html', 'homepageUrl': 'http://blog.j15r.com/', 'enabledCommentProfileImages': true, 'searchLabel': '', 'searchQuery': '', 'pageName': 'Mapping Google', 'pageTitle': 'as simple as possible, but no simpler: Mapping Google', 'encoding': 'UTF-8', 'locale': 'en-US', 'isPrivate': false, 'isMobile': false, 'mobileClass': '', 'languageDirection': 'ltr', 'feedLinks': '\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42as simple as possible, but no simpler - Atom\42 href\75\42http://blog.j15r.com/feeds/posts/default\42 /\76\n\74link rel\75\42alternate\42 type\75\42application/rss+xml\42 title\75\42as simple as possible, but no simpler - RSS\42 href\75\42http://blog.j15r.com/feeds/posts/default?alt\75rss\42 /\76\n\74link rel\75\42service.post\42 type\75\42application/atom+xml\42 title\75\42as simple as possible, but no simpler - Atom\42 href\75\42http://www.blogger.com/feeds/14995055/posts/default\42 /\76\n\74link rel\75\42EditURI\42 type\75\42application/rsd+xml\42 title\75\42RSD\42 href\75\42http://www.blogger.com/rsd.g?blogID\07514995055\42 /\76\n\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42as simple as possible, but no simpler - Atom\42 href\75\42http://blog.j15r.com/feeds/116818019991521367/comments/default\42 /\76\n', 'meTag': '', 'openIdOpTag': '', 'imageSrcTag': '', 'latencyHeadScript': '\74script type\75\42text/javascript\42\76(function() { var a\75window;function c(b){this.t\75{};this.tick\75function(d,i,e){e\75e?e:(new Date).getTime();this.t[d]\75[e,i]};this.tick(\42start\42,null,b)}var f\75new c;a.jstiming\75{Timer:c,load:f};try{var g\75null;if(a.chrome\46\46a.chrome.csi)g\75Math.floor(a.chrome.csi().pageT);if(g\75\75null)if(a.gtbExternal)g\75a.gtbExternal.pageT();if(g\75\75null)if(a.external)g\75a.external.pageT;if(g)a.jstiming.pt\75g}catch(h){};a.tickAboveFold\75function(b){b\75b;var d\0750;if(b.offsetParent){do d+\75b.offsetTop;while(b\75b.offsetParent)}b\75d;b\74\075750\46\46a.jstiming.load.tick(\42aft\42)};var j\75false;function k(){if(!j){j\75true;a.jstiming.load.tick(\42firstScrollTime\42)}}a.addEventListener?a.addEventListener(\42scroll\42,k,false):a.attachEvent(\42onscroll\42,k);\n })();\74/script\076', 'mobileHeadScript': ''}}]);
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LinkListView', new _WidgetInfo('LinkList1', 'sidebar', null, document.getElementById('LinkList1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header'));
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'commentInteractionIframeUrl': 'http://www.blogger.com/comment-interaction-iframe.g?blogId\07514995055', 'mobile': false}, 'displayModeFull'));
</script>
</body>
</html>